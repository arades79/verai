{"question": "/* Generated by Yosys 0.53 (git sha1 53c22ab7c, g++ 12.2.1 -fPIC -O3) */\n\n(* src = \"../picorv32/picosoc/spimemio.v:20.1-376.10\" *)\nmodule spimemio(clk, resetn, valid, ready, addr, rdata, flash_csb, flash_clk, flash_io0_oe, flash_io1_oe, flash_io2_oe, flash_io3_oe, flash_io0_do, flash_io1_do, flash_io2_do, flash_io3_do, flash_io0_di, flash_io1_di, flash_io2_di, flash_io3_di, cfgreg_we\n, cfgreg_di, cfgreg_do);\n  wire _0000_;\n  wire _0001_;\n  wire _0002_;\n  wire _0003_;\n  wire _0004_;\n  wire _0005_;\n  wire _0006_;\n  wire _0007_;\n  wire _0008_;\n  wire _0009_;\n  wire _0010_;\n  wire _0011_;\n  wire _0012_;\n  wire _0013_;\n  wire _0014_;\n  wire _0015_;\n  wire _0016_;\n  wire _0017_;\n  wire _0018_;\n  wire _0019_;\n  wire _0020_;\n  wire _0021_;\n  wire _0022_;\n  wire _0023_;\n  wire _0024_;\n  wire _0025_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0026_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0027_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0028_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0029_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0030_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0031_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0032_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0033_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0034_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0035_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0036_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0037_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0038_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0039_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0040_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0041_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0042_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0043_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0044_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0045_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0046_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0047_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0048_;\n  (* src = \"../picorv32/picosoc/spimemio.v:226.16-226.43\" *)\n  wire _0049_;\n  (* src = \"../picorv32/picosoc/spimemio.v:224.8-224.35\" *)\n  wire _0050_;\n  (* src = \"../picorv32/picosoc/spimemio.v:100.16-100.39\" *)\n  wire _0051_;\n  wire _0052_;\n  wire _0053_;\n  wire _0054_;\n  wire _0055_;\n  wire _0056_;\n  wire _0057_;\n  wire _0058_;\n  wire _0059_;\n  wire _0060_;\n  wire _0061_;\n  wire _0062_;\n  wire _0063_;\n  wire _0064_;\n  wire _0065_;\n  wire _0066_;\n  wire _0067_;\n  wire _0068_;\n  wire _0069_;\n  wire _0070_;\n  wire _0071_;\n  wire _0072_;\n  wire _0073_;\n  wire _0074_;\n  wire _0075_;\n  wire _0076_;\n  wire _0077_;\n  wire _0078_;\n  wire _0079_;\n  wire _0080_;\n  wire _0081_;\n  wire _0082_;\n  wire _0083_;\n  wire _0084_;\n  wire _0085_;\n  wire _0086_;\n  wire _0087_;\n  wire _0088_;\n  wire _0089_;\n  wire _0090_;\n  wire _0091_;\n  wire _0092_;\n  wire _0093_;\n  wire _0094_;\n  wire _0095_;\n  wire _0096_;\n  wire _0097_;\n  wire _0098_;\n  wire _0099_;\n  wire _0100_;\n  wire _0101_;\n  wire _0102_;\n  wire _0103_;\n  wire _0104_;\n  wire _0105_;\n  wire _0106_;\n  wire _0107_;\n  wire _0108_;\n  wire _0109_;\n  wire _0110_;\n  wire _0111_;\n  wire _0112_;\n  wire _0113_;\n  wire _0114_;\n  wire _0115_;\n  wire _0116_;\n  wire _0117_;\n  wire _0118_;\n  wire _0119_;\n  wire _0120_;\n  wire _0121_;\n  wire _0122_;\n  wire _0123_;\n  wire _0124_;\n  wire _0125_;\n  wire _0126_;\n  wire _0127_;\n  wire _0128_;\n  wire _0129_;\n  wire _0130_;\n  wire _0131_;\n  wire _0132_;\n  wire _0133_;\n  wire _0134_;\n  wire _0135_;\n  wire _0136_;\n  wire _0137_;\n  wire _0138_;\n  wire _0139_;\n  wire _0140_;\n  wire _0141_;\n  wire _0142_;\n  wire _0143_;\n  wire _0144_;\n  wire _0145_;\n  wire _0146_;\n  wire _0147_;\n  wire _0148_;\n  wire _0149_;\n  wire _0150_;\n  wire _0151_;\n  wire _0152_;\n  wire _0153_;\n  wire _0154_;\n  wire _0155_;\n  wire _0156_;\n  wire _0157_;\n  wire _0158_;\n  wire _0159_;\n  wire _0160_;\n  wire _0161_;\n  wire _0162_;\n  wire _0163_;\n  wire _0164_;\n  wire _0165_;\n  wire _0166_;\n  wire _0167_;\n  wire _0168_;\n  wire _0169_;\n  wire _0170_;\n  wire _0171_;\n  wire _0172_;\n  wire _0173_;\n  wire _0174_;\n  wire _0175_;\n  wire _0176_;\n  wire _0177_;\n  wire _0178_;\n  wire _0179_;\n  wire _0180_;\n  wire _0181_;\n  wire _0182_;\n  wire _0183_;\n  wire _0184_;\n  wire _0185_;\n  wire _0186_;\n  wire _0187_;\n  wire _0188_;\n  wire _0189_;\n  wire _0190_;\n  wire _0191_;\n  wire _0192_;\n  wire _0193_;\n  wire _0194_;\n  wire _0195_;\n  wire _0196_;\n  wire _0197_;\n  wire _0198_;\n  wire _0199_;\n  wire _0200_;\n  wire _0201_;\n  wire _0202_;\n  wire _0203_;\n  wire _0204_;\n  wire _0205_;\n  wire _0206_;\n  wire _0207_;\n  wire _0208_;\n  wire _0209_;\n  wire _0210_;\n  wire _0211_;\n  wire _0212_;\n  wire _0213_;\n  wire _0214_;\n  wire _0215_;\n  wire _0216_;\n  wire _0217_;\n  wire _0218_;\n  wire _0219_;\n  wire _0220_;\n  wire _0221_;\n  wire _0222_;\n  wire _0223_;\n  wire _0224_;\n  wire _0225_;\n  wire _0226_;\n  wire _0227_;\n  wire _0228_;\n  wire _0229_;\n  wire _0230_;\n  wire _0231_;\n  wire _0232_;\n  wire _0233_;\n  wire _0234_;\n  wire _0235_;\n  wire _0236_;\n  wire _0237_;\n  wire _0238_;\n  wire _0239_;\n  wire _0240_;\n  wire _0241_;\n  wire _0242_;\n  wire _0243_;\n  wire _0244_;\n  wire _0245_;\n  wire _0246_;\n  wire _0247_;\n  wire _0248_;\n  wire _0249_;\n  wire _0250_;\n  wire _0251_;\n  wire _0252_;\n  wire _0253_;\n  wire _0254_;\n  wire _0255_;\n  wire _0256_;\n  wire _0257_;\n  wire _0258_;\n  wire _0259_;\n  wire _0260_;\n  wire _0261_;\n  wire _0262_;\n  wire _0263_;\n  wire _0264_;\n  wire _0265_;\n  wire _0266_;\n  wire _0267_;\n  wire _0268_;\n  wire _0269_;\n  wire _0270_;\n  wire _0271_;\n  wire _0272_;\n  wire _0273_;\n  wire _0274_;\n  wire _0275_;\n  wire _0276_;\n  wire _0277_;\n  wire _0278_;\n  wire _0279_;\n  wire _0280_;\n  wire _0281_;\n  wire _0282_;\n  wire _0283_;\n  wire _0284_;\n  wire _0285_;\n  wire _0286_;\n  wire _0287_;\n  wire _0288_;\n  wire _0289_;\n  wire _0290_;\n  wire _0291_;\n  wire _0292_;\n  wire _0293_;\n  wire _0294_;\n  wire _0295_;\n  wire _0296_;\n  wire _0297_;\n  wire _0298_;\n  wire _0299_;\n  wire _0300_;\n  wire _0301_;\n  wire _0302_;\n  wire _0303_;\n  wire _0304_;\n  wire _0305_;\n  wire _0306_;\n  wire _0307_;\n  wire _0308_;\n  wire _0309_;\n  wire _0310_;\n  wire _0311_;\n  wire _0312_;\n  wire _0313_;\n  wire _0314_;\n  wire _0315_;\n  wire _0316_;\n  wire _0317_;\n  wire _0318_;\n  wire _0319_;\n  wire _0320_;\n  wire _0321_;\n  wire _0322_;\n  wire _0323_;\n  wire _0324_;\n  wire _0325_;\n  wire _0326_;\n  wire _0327_;\n  wire _0328_;\n  wire _0329_;\n  wire _0330_;\n  wire _0331_;\n  wire _0332_;\n  wire _0333_;\n  wire _0334_;\n  wire _0335_;\n  wire _0336_;\n  wire _0337_;\n  wire _0338_;\n  wire _0339_;\n  wire _0340_;\n  wire _0341_;\n  wire _0342_;\n  wire _0343_;\n  wire _0344_;\n  wire _0345_;\n  wire _0346_;\n  wire _0347_;\n  wire _0348_;\n  wire _0349_;\n  wire _0350_;\n  wire _0351_;\n  wire _0352_;\n  wire _0353_;\n  wire _0354_;\n  wire _0355_;\n  wire _0356_;\n  wire _0357_;\n  wire _0358_;\n  wire _0359_;\n  wire _0360_;\n  wire _0361_;\n  wire _0362_;\n  wire _0363_;\n  wire _0364_;\n  wire _0365_;\n  wire _0366_;\n  wire _0367_;\n  wire _0368_;\n  wire _0369_;\n  wire _0370_;\n  wire _0371_;\n  wire _0372_;\n  wire _0373_;\n  wire _0374_;\n  wire _0375_;\n  wire _0376_;\n  wire _0377_;\n  wire _0378_;\n  wire _0379_;\n  wire _0380_;\n  wire _0381_;\n  wire _0382_;\n  wire _0383_;\n  wire _0384_;\n  wire _0385_;\n  wire _0386_;\n  wire _0387_;\n  wire _0388_;\n  wire _0389_;\n  wire _0390_;\n  wire _0391_;\n  wire _0392_;\n  wire _0393_;\n  wire _0394_;\n  wire _0395_;\n  wire _0396_;\n  wire _0397_;\n  wire _0398_;\n  wire _0399_;\n  wire _0400_;\n  wire _0401_;\n  wire _0402_;\n  wire _0403_;\n  wire _0404_;\n  wire _0405_;\n  wire _0406_;\n  wire _0407_;\n  wire _0408_;\n  wire _0409_;\n  wire _0410_;\n  wire _0411_;\n  wire _0412_;\n  wire _0413_;\n  wire _0414_;\n  wire _0415_;\n  wire _0416_;\n  wire _0417_;\n  wire _0418_;\n  wire _0419_;\n  wire _0420_;\n  wire _0421_;\n  wire _0422_;\n  wire _0423_;\n  wire _0424_;\n  wire _0425_;\n  wire _0426_;\n  wire _0427_;\n  wire _0428_;\n  wire _0429_;\n  wire _0430_;\n  wire _0431_;\n  wire _0432_;\n  wire _0433_;\n  wire _0434_;\n  wire _0435_;\n  wire _0436_;\n  wire _0437_;\n  wire _0438_;\n  wire _0439_;\n  wire _0440_;\n  wire _0441_;\n  wire _0442_;\n  wire _0443_;\n  wire _0444_;\n  wire _0445_;\n  wire _0446_;\n  wire _0447_;\n  wire _0448_;\n  wire _0449_;\n  wire _0450_;\n  wire _0451_;\n  wire _0452_;\n  wire _0453_;\n  wire _0454_;\n  wire _0455_;\n  wire _0456_;\n  wire _0457_;\n  wire _0458_;\n  wire _0459_;\n  wire _0460_;\n  wire _0461_;\n  wire _0462_;\n  wire _0463_;\n  wire _0464_;\n  wire _0465_;\n  (* force_downto = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:0.0-0.0|../picorv32/picosoc/spimemio.v:235.4-359.11|/var/home/arades/vrev/verai/.venv/lib64/python3.13/site-packages/pyosys/share/techmap.v:576.21-576.22\" *)\n  wire _0466_;\n  (* force_downto = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:0.0-0.0|../picorv32/picosoc/spimemio.v:235.4-359.11|/var/home/arades/vrev/verai/.venv/lib64/python3.13/site-packages/pyosys/share/techmap.v:576.21-576.22\" *)\n  wire [2:0] _0467_;\n  (* force_downto = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:0.0-0.0|../picorv32/picosoc/spimemio.v:235.4-359.11|/var/home/arades/vrev/verai/.venv/lib64/python3.13/site-packages/pyosys/share/techmap.v:576.21-576.22\" *)\n  wire [7:0] _0468_;\n  (* src = \"../picorv32/picosoc/spimemio.v:25.15-25.19\" *)\n  input [23:0] addr;\n  wire [23:0] addr;\n  (* src = \"../picorv32/picosoc/spimemio.v:64.13-64.19\" *)\n  reg [23:0] buffer;\n  (* src = \"../picorv32/picosoc/spimemio.v:47.16-47.25\" *)\n  input [31:0] cfgreg_di;\n  wire [31:0] cfgreg_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:48.16-48.25\" *)\n  output [31:0] cfgreg_do;\n  wire [31:0] cfgreg_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:46.16-46.25\" *)\n  input [3:0] cfgreg_we;\n  wire [3:0] cfgreg_we;\n  (* src = \"../picorv32/picosoc/spimemio.v:21.8-21.11\" *)\n  input clk;\n  wire clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:83.12-83.22\" *)\n  reg config_clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:79.12-79.23\" *)\n  reg config_cont;\n  (* src = \"../picorv32/picosoc/spimemio.v:82.12-82.22\" *)\n  reg config_csb;\n  (* src = \"../picorv32/picosoc/spimemio.v:77.12-77.22\" *)\n  reg config_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:84.12-84.21\" *)\n  reg [3:0] config_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:80.12-80.24\" *)\n  reg [3:0] config_dummy;\n  (* src = \"../picorv32/picosoc/spimemio.v:76.12-76.21\" *)\n  reg config_en;\n  (* src = \"../picorv32/picosoc/spimemio.v:81.12-81.21\" *)\n  reg [3:0] config_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:78.12-78.23\" *)\n  reg config_qspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:55.13-55.21\" *)\n  wire din_cont;\n  (* src = \"../picorv32/picosoc/spimemio.v:53.13-53.21\" *)\n  reg [7:0] din_data;\n  (* src = \"../picorv32/picosoc/spimemio.v:57.13-57.20\" *)\n  reg din_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:56.13-56.21\" *)\n  reg din_qspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:58.13-58.19\" *)\n  reg din_rd;\n  (* src = \"../picorv32/picosoc/spimemio.v:52.13-52.22\" *)\n  wire din_ready;\n  (* src = \"../picorv32/picosoc/spimemio.v:54.13-54.20\" *)\n  wire [3:0] din_tag;\n  (* src = \"../picorv32/picosoc/spimemio.v:51.13-51.22\" *)\n  reg din_valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:61.13-61.22\" *)\n  wire [7:0] dout_data;\n  (* src = \"../picorv32/picosoc/spimemio.v:62.13-62.21\" *)\n  wire [3:0] dout_tag;\n  (* src = \"../picorv32/picosoc/spimemio.v:60.13-60.23\" *)\n  wire dout_valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:29.9-29.18\" *)\n  output flash_clk;\n  wire flash_clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:28.9-28.18\" *)\n  output flash_csb;\n  wire flash_csb;\n  (* src = \"../picorv32/picosoc/spimemio.v:41.9-41.21\" *)\n  input flash_io0_di;\n  wire flash_io0_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:36.9-36.21\" *)\n  output flash_io0_do;\n  wire flash_io0_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:31.9-31.21\" *)\n  output flash_io0_oe;\n  wire flash_io0_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:42.9-42.21\" *)\n  input flash_io1_di;\n  wire flash_io1_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:37.9-37.21\" *)\n  output flash_io1_do;\n  wire flash_io1_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:32.9-32.21\" *)\n  output flash_io1_oe;\n  wire flash_io1_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:43.9-43.21\" *)\n  input flash_io2_di;\n  wire flash_io2_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:38.9-38.21\" *)\n  output flash_io2_do;\n  wire flash_io2_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:33.9-33.21\" *)\n  output flash_io2_oe;\n  wire flash_io2_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:44.9-44.21\" *)\n  input flash_io3_di;\n  wire flash_io3_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:39.9-39.21\" *)\n  output flash_io3_do;\n  wire flash_io3_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:34.9-34.21\" *)\n  output flash_io3_oe;\n  wire flash_io3_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:66.13-66.20\" *)\n  reg [23:0] rd_addr;\n  (* src = \"../picorv32/picosoc/spimemio.v:69.6-69.12\" *)\n  reg rd_inc;\n  (* src = \"../picorv32/picosoc/spimemio.v:67.6-67.14\" *)\n  reg rd_valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:68.6-68.13\" *)\n  reg rd_wait;\n  (* src = \"../picorv32/picosoc/spimemio.v:26.20-26.25\" *)\n  output [31:0] rdata;\n  reg [31:0] rdata;\n  (* src = \"../picorv32/picosoc/spimemio.v:24.9-24.14\" *)\n  output ready;\n  wire ready;\n  (* src = \"../picorv32/picosoc/spimemio.v:21.13-21.19\" *)\n  input resetn;\n  wire resetn;\n  (* src = \"../picorv32/picosoc/spimemio.v:74.6-74.15\" *)\n  reg softreset;\n  (* onehot = 32'd1 *)\n  reg [12:0] state;\n  (* src = \"../picorv32/picosoc/spimemio.v:23.8-23.13\" *)\n  input valid;\n  wire valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:134.7-134.15\" *)\n  wire xfer_clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:133.7-133.15\" *)\n  wire xfer_csb;\n  (* src = \"../picorv32/picosoc/spimemio.v:172.7-172.15\" *)\n  wire xfer_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:171.7-171.16\" *)\n  wire xfer_dspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:146.6-146.17\" *)\n  reg xfer_io0_90;\n  (* src = \"../picorv32/picosoc/spimemio.v:141.7-141.18\" *)\n  wire xfer_io0_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:136.7-136.18\" *)\n  wire xfer_io0_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:147.6-147.17\" *)\n  reg xfer_io1_90;\n  (* src = \"../picorv32/picosoc/spimemio.v:142.7-142.18\" *)\n  wire xfer_io1_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:137.7-137.18\" *)\n  wire xfer_io1_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:148.6-148.17\" *)\n  reg xfer_io2_90;\n  (* src = \"../picorv32/picosoc/spimemio.v:143.7-143.18\" *)\n  wire xfer_io2_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:138.7-138.18\" *)\n  wire xfer_io2_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:149.6-149.17\" *)\n  reg xfer_io3_90;\n  (* src = \"../picorv32/picosoc/spimemio.v:144.7-144.18\" *)\n  wire xfer_io3_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:139.7-139.18\" *)\n  wire xfer_io3_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:50.13-50.24\" *)\n  reg xfer_resetn;\n  assign _0052_ = dout_tag[1] | dout_tag[0];\n  assign _0053_ = dout_tag[3] | ~(dout_tag[2]);\n  assign _0054_ = _0053_ | _0052_;\n  assign _0050_ = dout_valid & ~(_0054_);\n  assign _0055_ = resetn & ~(softreset);\n  assign _0013_ = ~_0055_;\n  assign _0016_ = _0050_ & ~(_0013_);\n  assign _0056_ = ~valid;\n  assign _0057_ = rd_addr[0] ^ addr[0];\n  assign _0058_ = rd_addr[1] ^ addr[1];\n  assign _0059_ = _0058_ | _0057_;\n  assign _0060_ = addr[2] ^ rd_addr[2];\n  assign _0061_ = rd_addr[3] ^ addr[3];\n  assign _0062_ = _0061_ | _0060_;\n  assign _0063_ = _0062_ | _0059_;\n  assign _0064_ = rd_addr[4] ^ addr[4];\n  assign _0065_ = rd_addr[5] ^ addr[5];\n  assign _0066_ = _0065_ | _0064_;\n  assign _0067_ = rd_addr[6] ^ addr[6];\n  assign _0068_ = rd_addr[7] ^ addr[7];\n  assign _0069_ = _0068_ | _0067_;\n  assign _0070_ = _0069_ | _0066_;\n  assign _0071_ = _0070_ | _0063_;\n  assign _0072_ = rd_addr[8] ^ addr[8];\n  assign _0073_ = rd_addr[9] ^ addr[9];\n  assign _0074_ = _0073_ | _0072_;\n  assign _0075_ = rd_addr[10] ^ addr[10];\n  assign _0076_ = rd_addr[11] ^ addr[11];\n  assign _0077_ = _0076_ | _0075_;\n  assign _0078_ = _0077_ | _0074_;\n  assign _0079_ = rd_addr[12] ^ addr[12];\n  assign _0080_ = rd_addr[13] ^ addr[13];\n  assign _0081_ = _0080_ | _0079_;\n  assign _0082_ = rd_addr[14] ^ addr[14];\n  assign _0083_ = rd_addr[15] ^ addr[15];\n  assign _0084_ = _0083_ | _0082_;\n  assign _0085_ = _0084_ | _0081_;\n  assign _0086_ = _0085_ | _0078_;\n  assign _0087_ = _0086_ | _0071_;\n  assign _0088_ = rd_addr[16] ^ addr[16];\n  assign _0089_ = rd_addr[17] ^ addr[17];\n  assign _0090_ = _0089_ | _0088_;\n  assign _0091_ = rd_addr[18] ^ addr[18];\n  assign _0092_ = rd_addr[19] ^ addr[19];\n  assign _0093_ = _0092_ | _0091_;\n  assign _0094_ = _0093_ | _0090_;\n  assign _0095_ = rd_addr[20] ^ addr[20];\n  assign _0096_ = rd_addr[21] ^ addr[21];\n  assign _0097_ = _0096_ | _0095_;\n  assign _0098_ = rd_addr[22] ^ addr[22];\n  assign _0099_ = rd_addr[23] ^ addr[23];\n  assign _0100_ = _0099_ | _0098_;\n  assign _0101_ = _0100_ | _0097_;\n  assign _0102_ = _0101_ | _0094_;\n  assign _0103_ = _0102_ | _0087_;\n  assign _0104_ = _0103_ | _0056_;\n  assign ready = rd_valid & ~(_0104_);\n  assign _0105_ = valid & ~(ready);\n  assign _0106_ = ~(addr[2] ^ rd_addr[2]);\n  assign _0107_ = ~(rd_addr[3] ^ rd_addr[2]);\n  assign _0108_ = ~(_0107_ ^ addr[3]);\n  assign _0109_ = ~(_0108_ | _0106_);\n  assign _0110_ = _0109_ & ~(_0059_);\n  assign _0111_ = ~(rd_addr[3] & rd_addr[2]);\n  assign _0112_ = _0111_ ^ rd_addr[4];\n  assign _0113_ = ~(_0112_ ^ addr[4]);\n  assign _0114_ = rd_addr[4] & ~(_0111_);\n  assign _0115_ = ~(_0114_ ^ rd_addr[5]);\n  assign _0116_ = ~(_0115_ ^ addr[5]);\n  assign _0117_ = _0116_ | _0113_;\n  assign _0118_ = ~rd_addr[6];\n  assign _0119_ = rd_addr[5] & rd_addr[4];\n  assign _0120_ = _0119_ & ~(_0111_);\n  assign _0121_ = _0120_ ^ _0118_;\n  assign _0122_ = ~(_0121_ ^ addr[6]);\n  assign _0123_ = _0120_ & ~(_0118_);\n  assign _0124_ = ~(_0123_ ^ rd_addr[7]);\n  assign _0125_ = ~(_0124_ ^ addr[7]);\n  assign _0126_ = _0125_ | _0122_;\n  assign _0127_ = _0126_ | _0117_;\n  assign _0128_ = _0110_ & ~(_0127_);\n  assign _0129_ = ~(rd_addr[7] & rd_addr[6]);\n  assign _0130_ = _0129_ | ~(_0120_);\n  assign _0131_ = _0130_ ^ rd_addr[8];\n  assign _0132_ = ~(_0131_ ^ addr[8]);\n  assign _0133_ = rd_addr[8] & ~(_0130_);\n  assign _0134_ = ~(_0133_ ^ rd_addr[9]);\n  assign _0135_ = ~(_0134_ ^ addr[9]);\n  assign _0136_ = _0135_ | _0132_;\n  assign _0137_ = ~rd_addr[10];\n  assign _0138_ = ~(rd_addr[9] & rd_addr[8]);\n  assign _0139_ = _0138_ | _0129_;\n  assign _0140_ = _0120_ & ~(_0139_);\n  assign _0141_ = _0140_ ^ _0137_;\n  assign _0142_ = ~(_0141_ ^ addr[10]);\n  assign _0143_ = _0140_ & ~(_0137_);\n  assign _0144_ = ~(_0143_ ^ rd_addr[11]);\n  assign _0145_ = ~(_0144_ ^ addr[11]);\n  assign _0146_ = _0145_ | _0142_;\n  assign _0147_ = _0146_ | _0136_;\n  assign _0148_ = ~(rd_addr[11] & rd_addr[10]);\n  assign _0149_ = _0148_ | ~(_0140_);\n  assign _0150_ = _0149_ ^ rd_addr[12];\n  assign _0151_ = ~(_0150_ ^ addr[12]);\n  assign _0152_ = rd_addr[12] & ~(_0149_);\n  assign _0153_ = ~(_0152_ ^ rd_addr[13]);\n  assign _0154_ = ~(_0153_ ^ addr[13]);\n  assign _0155_ = _0154_ | _0151_;\n  assign _0156_ = ~rd_addr[14];\n  assign _0157_ = ~(rd_addr[13] & rd_addr[12]);\n  assign _0158_ = _0157_ | _0148_;\n  assign _0159_ = _0140_ & ~(_0158_);\n  assign _0160_ = _0159_ ^ _0156_;\n  assign _0161_ = ~(_0160_ ^ addr[14]);\n  assign _0162_ = _0159_ & ~(_0156_);\n  assign _0163_ = ~(_0162_ ^ rd_addr[15]);\n  assign _0164_ = ~(_0163_ ^ addr[15]);\n  assign _0165_ = _0164_ | _0161_;\n  assign _0166_ = _0165_ | _0155_;\n  assign _0167_ = _0166_ | _0147_;\n  assign _0168_ = _0128_ & ~(_0167_);\n  assign _0169_ = ~(rd_addr[15] & rd_addr[14]);\n  assign _0170_ = _0169_ | ~(_0159_);\n  assign _0171_ = _0170_ ^ rd_addr[16];\n  assign _0172_ = ~(_0171_ ^ addr[16]);\n  assign _0173_ = rd_addr[16] & ~(_0170_);\n  assign _0174_ = ~(_0173_ ^ rd_addr[17]);\n  assign _0175_ = ~(_0174_ ^ addr[17]);\n  assign _0176_ = _0175_ | _0172_;\n  assign _0177_ = ~rd_addr[18];\n  assign _0178_ = ~(rd_addr[17] & rd_addr[16]);\n  assign _0179_ = _0178_ | _0169_;\n  assign _0180_ = _0179_ | _0158_;\n  assign _0181_ = _0140_ & ~(_0180_);\n  assign _0182_ = _0181_ ^ _0177_;\n  assign _0183_ = ~(_0182_ ^ addr[18]);\n  assign _0184_ = _0181_ & ~(_0177_);\n  assign _0185_ = ~(_0184_ ^ rd_addr[19]);\n  assign _0186_ = ~(_0185_ ^ addr[19]);\n  assign _0187_ = _0186_ | _0183_;\n  assign _0188_ = _0187_ | _0176_;\n  assign _0189_ = ~rd_addr[20];\n  assign _0190_ = ~(rd_addr[19] & rd_addr[18]);\n  assign _0191_ = _0181_ & ~(_0190_);\n  assign _0192_ = _0191_ ^ _0189_;\n  assign _0193_ = ~(_0192_ ^ addr[20]);\n  assign _0194_ = _0191_ & ~(_0189_);\n  assign _0195_ = ~(_0194_ ^ rd_addr[21]);\n  assign _0196_ = ~(_0195_ ^ addr[21]);\n  assign _0197_ = _0196_ | _0193_;\n  assign _0198_ = ~rd_addr[22];\n  assign _0199_ = ~(rd_addr[21] & rd_addr[20]);\n  assign _0200_ = _0199_ | _0190_;\n  assign _0201_ = _0181_ & ~(_0200_);\n  assign _0202_ = _0201_ ^ _0198_;\n  assign _0203_ = ~(_0202_ ^ addr[22]);\n  assign _0204_ = _0201_ & ~(_0198_);\n  assign _0205_ = ~(_0204_ ^ rd_addr[23]);\n  assign _0206_ = ~(_0205_ ^ addr[23]);\n  assign _0207_ = _0206_ | _0203_;\n  assign _0208_ = _0207_ | _0197_;\n  assign _0209_ = _0208_ | _0188_;\n  assign _0210_ = ~(rd_addr[23] & rd_addr[22]);\n  assign _0211_ = _0201_ & ~(_0210_);\n  assign _0212_ = _0211_ | _0209_;\n  assign _0213_ = _0168_ & ~(_0212_);\n  assign _0214_ = _0213_ | ~(_0105_);\n  assign _0215_ = rd_valid & ~(_0214_);\n  assign _0216_ = _0215_ | din_ready;\n  assign _0217_ = _0216_ | _0013_;\n  assign _0218_ = state[0] & ~(_0217_);\n  assign _0000_ = _0218_ | _0013_;\n  assign _0219_ = state[12] & ~(_0217_);\n  assign _0220_ = ~din_ready;\n  assign _0221_ = _0215_ | _0220_;\n  assign _0222_ = _0221_ | _0013_;\n  assign _0223_ = state[6] & ~(_0222_);\n  assign _0003_ = _0223_ | _0219_;\n  assign _0224_ = state[6] & ~(_0217_);\n  assign _0225_ = _0013_ | ~(_0105_);\n  assign _0226_ = _0225_ | _0221_;\n  assign _0227_ = state[9] & ~(_0226_);\n  assign _0009_ = _0227_ | _0224_;\n  assign _0228_ = ~rd_inc;\n  assign _0229_ = ~(_0050_ & _0228_);\n  assign _0023_ = ~(_0229_ | _0013_);\n  assign _0230_ = state[0] & ~(_0222_);\n  assign _0231_ = _0215_ | dout_valid;\n  assign _0232_ = _0231_ | _0013_;\n  assign _0233_ = state[7] & ~(_0232_);\n  assign _0010_ = _0233_ | _0230_;\n  assign _0234_ = state[8] & ~(_0217_);\n  assign _0235_ = ~(config_ddr | config_qspi);\n  assign _0236_ = ~(_0235_ & _0055_);\n  assign _0237_ = _0236_ | _0221_;\n  assign _0238_ = state[12] & ~(_0237_);\n  assign _0239_ = _0238_ | _0234_;\n  assign _0240_ = rd_wait & ~(valid);\n  assign _0241_ = _0240_ | ~(_0055_);\n  assign _0242_ = _0241_ | _0221_;\n  assign _0243_ = state[3] & ~(_0242_);\n  assign _0244_ = state[1] & ~(_0222_);\n  assign _0245_ = _0244_ | _0243_;\n  assign _0011_ = _0245_ | _0239_;\n  assign _0246_ = _0225_ | _0216_;\n  assign _0247_ = state[9] & ~(_0246_);\n  assign _0248_ = state[2] & ~(_0222_);\n  assign _0249_ = _0248_ | _0247_;\n  assign _0025_ = _0215_ | _0013_;\n  assign _0250_ = _0025_ | _0105_;\n  assign _0251_ = state[9] & ~(_0250_);\n  assign _0252_ = ~(_0215_ & config_cont);\n  assign _0253_ = ~(_0252_ | _0013_);\n  assign _0254_ = _0253_ | _0251_;\n  assign _0012_ = _0254_ | _0249_;\n  assign _0255_ = _0056_ & ~(_0050_);\n  assign _0015_ = ~(_0255_ | _0013_);\n  assign _0256_ = state[4] & ~(_0222_);\n  assign _0257_ = state[10] & ~(_0232_);\n  assign _0001_ = _0257_ | _0256_;\n  assign _0258_ = state[11] & ~(_0217_);\n  assign _0259_ = state[5] & ~(_0222_);\n  assign _0002_ = _0259_ | _0258_;\n  assign _0024_ = _0215_ | state[2];\n  assign _0260_ = state[8] & ~(_0222_);\n  assign _0261_ = state[5] & ~(_0217_);\n  assign _0008_ = _0261_ | _0260_;\n  assign _0262_ = ~(_0215_ | _0050_);\n  assign _0263_ = _0262_ & ~(state[2]);\n  assign _0014_ = ~(_0263_ | _0013_);\n  assign _0264_ = state[1] & ~(_0217_);\n  assign _0265_ = _0235_ | ~(_0055_);\n  assign _0266_ = _0265_ | _0221_;\n  assign _0267_ = state[12] & ~(_0266_);\n  assign _0004_ = _0267_ | _0264_;\n  assign _0268_ = ~dout_valid;\n  assign _0269_ = _0215_ | _0268_;\n  assign _0270_ = _0269_ | _0013_;\n  assign _0271_ = state[7] & ~(_0270_);\n  assign _0272_ = state[4] & ~(_0217_);\n  assign _0007_ = _0272_ | _0271_;\n  assign _0273_ = dout_tag[1] | ~(dout_tag[0]);\n  assign _0274_ = dout_tag[3] | dout_tag[2];\n  assign _0275_ = _0274_ | _0273_;\n  assign _0276_ = _0275_ | _0268_;\n  assign _0017_ = _0055_ & ~(_0276_);\n  assign _0277_ = ~_0240_;\n  assign _0278_ = _0025_ | _0277_;\n  assign _0279_ = state[3] & ~(_0278_);\n  assign _0280_ = state[11] & ~(_0222_);\n  assign _0281_ = _0280_ | _0279_;\n  assign _0282_ = _0241_ | _0216_;\n  assign _0283_ = state[3] & ~(_0282_);\n  assign _0006_ = _0283_ | _0281_;\n  assign _0284_ = state[2] & ~(_0217_);\n  assign _0285_ = state[10] & ~(_0270_);\n  assign _0286_ = _0285_ | _0284_;\n  assign _0287_ = config_cont | ~(_0215_);\n  assign _0288_ = ~(_0287_ | _0013_);\n  assign _0005_ = _0288_ | _0286_;\n  assign _0289_ = dout_tag[0] | ~(dout_tag[1]);\n  assign _0290_ = _0289_ | _0274_;\n  assign _0291_ = _0290_ | _0268_;\n  assign _0018_ = _0055_ & ~(_0291_);\n  assign _0292_ = ~(dout_tag[1] & dout_tag[0]);\n  assign _0293_ = _0292_ | _0274_;\n  assign _0294_ = _0293_ | _0268_;\n  assign _0019_ = _0055_ & ~(_0294_);\n  assign _0020_ = state[1] & din_ready;\n  assign _0295_ = ~state[9];\n  assign _0296_ = _0105_ | _0295_;\n  assign _0297_ = ~state[3];\n  assign _0298_ = _0240_ & ~(_0297_);\n  assign _0299_ = _0296_ & ~(_0298_);\n  assign _0300_ = ~(state[5] | state[3]);\n  assign _0301_ = state[8] | state[9];\n  assign _0302_ = _0300_ & ~(_0301_);\n  assign _0303_ = ~(state[0] | state[1]);\n  assign _0304_ = state[4] | state[2];\n  assign _0305_ = _0303_ & ~(_0304_);\n  assign _0306_ = ~(state[6] | state[12]);\n  assign _0307_ = ~(_0306_ & _0305_);\n  assign _0308_ = _0307_ | state[11];\n  assign _0309_ = _0302_ & ~(_0308_);\n  assign _0021_ = _0299_ & ~(_0309_);\n  assign _0310_ = _0296_ & ~(_0013_);\n  assign _0311_ = state[6] | state[5];\n  assign _0312_ = state[12] | state[9];\n  assign _0313_ = _0312_ | _0311_;\n  assign _0314_ = _0305_ & ~(_0313_);\n  assign _0022_ = _0310_ & ~(_0314_);\n  assign _0315_ = ~config_en;\n  assign _0316_ = cfgreg_we[1] | cfgreg_we[0];\n  assign _0317_ = cfgreg_we[3] | cfgreg_we[2];\n  assign _0318_ = _0317_ | _0316_;\n  assign _0051_ = _0318_ | _0315_;\n  assign xfer_dspi = din_ddr & ~(din_qspi);\n  assign xfer_ddr = din_ddr & din_qspi;\n  assign flash_csb = config_en ? xfer_csb : config_csb;\n  assign flash_clk = config_en ? xfer_clk : config_clk;\n  assign flash_io0_oe = config_en ? xfer_io0_oe : config_oe[0];\n  assign flash_io1_oe = config_en ? xfer_io1_oe : config_oe[1];\n  assign flash_io2_oe = config_en ? xfer_io2_oe : config_oe[2];\n  assign flash_io3_oe = config_en ? xfer_io3_oe : config_oe[3];\n  assign _0319_ = config_ddr ? xfer_io0_90 : xfer_io0_do;\n  assign flash_io0_do = config_en ? _0319_ : config_do[0];\n  assign _0320_ = config_ddr ? xfer_io1_90 : xfer_io1_do;\n  assign flash_io1_do = config_en ? _0320_ : config_do[1];\n  assign _0321_ = config_ddr ? xfer_io2_90 : xfer_io2_do;\n  assign flash_io2_do = config_en ? _0321_ : config_do[2];\n  assign _0322_ = config_ddr ? xfer_io3_90 : xfer_io3_do;\n  assign flash_io3_do = config_en ? _0322_ : config_do[3];\n  assign _0026_ = addr[0] & ~(rd_inc);\n  assign _0037_ = addr[1] & ~(rd_inc);\n  assign _0323_ = ~rd_addr[2];\n  assign _0042_ = rd_inc ? _0323_ : addr[2];\n  assign _0324_ = ~_0107_;\n  assign _0043_ = rd_inc ? _0324_ : addr[3];\n  assign _0325_ = ~_0112_;\n  assign _0044_ = rd_inc ? _0325_ : addr[4];\n  assign _0326_ = ~_0115_;\n  assign _0045_ = rd_inc ? _0326_ : addr[5];\n  assign _0327_ = ~_0121_;\n  assign _0046_ = rd_inc ? _0327_ : addr[6];\n  assign _0328_ = ~_0124_;\n  assign _0047_ = rd_inc ? _0328_ : addr[7];\n  assign _0329_ = ~_0131_;\n  assign _0048_ = rd_inc ? _0329_ : addr[8];\n  assign _0330_ = ~_0134_;\n  assign _0049_ = rd_inc ? _0330_ : addr[9];\n  assign _0331_ = ~_0141_;\n  assign _0027_ = rd_inc ? _0331_ : addr[10];\n  assign _0332_ = ~_0144_;\n  assign _0028_ = rd_inc ? _0332_ : addr[11];\n  assign _0333_ = ~_0150_;\n  assign _0029_ = rd_inc ? _0333_ : addr[12];\n  assign _0334_ = ~_0153_;\n  assign _0030_ = rd_inc ? _0334_ : addr[13];\n  assign _0335_ = ~_0160_;\n  assign _0031_ = rd_inc ? _0335_ : addr[14];\n  assign _0336_ = ~_0163_;\n  assign _0032_ = rd_inc ? _0336_ : addr[15];\n  assign _0337_ = ~_0171_;\n  assign _0033_ = rd_inc ? _0337_ : addr[16];\n  assign _0338_ = ~_0174_;\n  assign _0034_ = rd_inc ? _0338_ : addr[17];\n  assign _0339_ = ~_0182_;\n  assign _0035_ = rd_inc ? _0339_ : addr[18];\n  assign _0340_ = ~_0185_;\n  assign _0036_ = rd_inc ? _0340_ : addr[19];\n  assign _0341_ = ~_0192_;\n  assign _0038_ = rd_inc ? _0341_ : addr[20];\n  assign _0342_ = ~_0195_;\n  assign _0039_ = rd_inc ? _0342_ : addr[21];\n  assign _0343_ = ~_0202_;\n  assign _0040_ = rd_inc ? _0343_ : addr[22];\n  assign _0344_ = ~_0205_;\n  assign _0041_ = rd_inc ? _0344_ : addr[23];\n  assign _0345_ = ~(state[10] | state[7]);\n  assign _0463_ = _0345_ | _0268_;\n  assign _0346_ = _0105_ ? config_ddr : din_ddr;\n  assign _0347_ = state[9] ? _0346_ : din_ddr;\n  assign _0348_ = _0347_ & config_cont;\n  assign _0464_ = _0215_ ? _0348_ : _0347_;\n  assign _0349_ = _0105_ ? config_qspi : din_qspi;\n  assign _0350_ = state[9] ? _0349_ : din_qspi;\n  assign _0351_ = _0350_ & config_cont;\n  assign _0465_ = _0215_ ? _0351_ : _0350_;\n  assign _0352_ = state[3] ? _0277_ : _0105_;\n  assign _0353_ = _0352_ & ~(din_ready);\n  assign _0354_ = ~(state[3] | state[9]);\n  assign _0355_ = _0353_ & ~(_0354_);\n  assign _0356_ = state[11] | state[8];\n  assign _0357_ = ~(_0356_ | _0311_);\n  assign _0358_ = ~(_0357_ & _0305_);\n  assign _0359_ = ~(_0358_ | state[12]);\n  assign _0360_ = _0220_ & ~(_0359_);\n  assign _0361_ = _0360_ | _0355_;\n  assign _0362_ = _0359_ & _0354_;\n  assign _0466_ = _0361_ & ~(_0362_);\n  assign _0363_ = ~(state[11] | state[3]);\n  assign _0364_ = state[8] | state[5];\n  assign _0365_ = _0363_ & ~(_0364_);\n  assign _0467_[0] = _0356_ & ~(_0365_);\n  assign _0366_ = state[11] | state[5];\n  assign _0467_[1] = _0366_ & ~(_0365_);\n  assign _0467_[2] = state[3] & ~(_0365_);\n  assign _0367_ = state[5] | state[1];\n  assign _0368_ = _0306_ & ~(_0367_);\n  assign _0369_ = state[2] | state[9];\n  assign _0370_ = _0369_ | state[4];\n  assign _0371_ = _0368_ & ~(_0370_);\n  assign _0372_ = din_ready & ~(config_dummy[0]);\n  assign _0373_ = state[1] & ~(_0372_);\n  assign _0374_ = din_ready | ~(addr[0]);\n  assign _0375_ = state[12] & ~(_0374_);\n  assign _0376_ = addr[8] & state[6];\n  assign _0377_ = _0376_ | _0375_;\n  assign _0378_ = _0377_ | _0373_;\n  assign _0379_ = addr[16] & state[9];\n  assign _0380_ = _0379_ | state[2];\n  assign _0381_ = _0380_ | state[4];\n  assign _0382_ = _0381_ | _0378_;\n  assign _0468_[0] = _0382_ | _0371_;\n  assign _0383_ = ~config_dummy[1];\n  assign _0384_ = din_ready ? _0383_ : config_cont;\n  assign _0385_ = state[1] & ~(_0384_);\n  assign _0386_ = din_ready | ~(addr[1]);\n  assign _0387_ = state[12] & ~(_0386_);\n  assign _0388_ = addr[9] & state[6];\n  assign _0389_ = _0388_ | _0387_;\n  assign _0390_ = _0389_ | _0385_;\n  assign _0391_ = addr[17] & state[9];\n  assign _0392_ = config_ddr & config_qspi;\n  assign _0393_ = state[2] & ~(_0392_);\n  assign _0394_ = _0393_ | _0391_;\n  assign _0395_ = _0394_ | state[4];\n  assign _0396_ = _0395_ | _0390_;\n  assign _0468_[1] = _0396_ | _0371_;\n  assign _0397_ = din_ready & ~(config_dummy[2]);\n  assign _0398_ = state[1] & ~(_0397_);\n  assign _0399_ = din_ready | ~(addr[2]);\n  assign _0400_ = state[12] & ~(_0399_);\n  assign _0401_ = addr[10] & state[6];\n  assign _0402_ = _0401_ | _0400_;\n  assign _0403_ = _0402_ | _0398_;\n  assign _0404_ = addr[18] & state[9];\n  assign _0405_ = _0392_ & state[2];\n  assign _0406_ = _0405_ | _0404_;\n  assign _0407_ = _0406_ | _0403_;\n  assign _0468_[2] = _0407_ | _0371_;\n  assign _0408_ = ~config_dummy[3];\n  assign _0409_ = din_ready ? _0408_ : config_cont;\n  assign _0410_ = state[1] & ~(_0409_);\n  assign _0411_ = din_ready | ~(addr[3]);\n  assign _0412_ = state[12] & ~(_0411_);\n  assign _0413_ = addr[11] & state[6];\n  assign _0414_ = _0413_ | _0412_;\n  assign _0415_ = _0414_ | _0410_;\n  assign _0416_ = addr[19] & state[9];\n  assign _0417_ = state[2] & ~(_0235_);\n  assign _0418_ = _0417_ | _0416_;\n  assign _0419_ = _0418_ | state[4];\n  assign _0420_ = _0419_ | _0415_;\n  assign _0468_[3] = _0420_ | _0371_;\n  assign _0421_ = config_cont | din_ready;\n  assign _0422_ = state[1] & ~(_0421_);\n  assign _0423_ = din_ready | ~(addr[4]);\n  assign _0424_ = state[12] & ~(_0423_);\n  assign _0425_ = addr[12] & state[6];\n  assign _0426_ = _0425_ | _0424_;\n  assign _0427_ = _0426_ | _0422_;\n  assign _0428_ = addr[20] & state[9];\n  assign _0429_ = config_qspi | ~(config_ddr);\n  assign _0430_ = state[2] & ~(_0429_);\n  assign _0431_ = _0430_ | _0428_;\n  assign _0432_ = _0431_ | _0427_;\n  assign _0468_[4] = _0432_ | _0371_;\n  assign _0433_ = state[1] & ~(din_ready);\n  assign _0434_ = din_ready | ~(addr[5]);\n  assign _0435_ = state[12] & ~(_0434_);\n  assign _0436_ = addr[13] & state[6];\n  assign _0437_ = _0436_ | _0435_;\n  assign _0438_ = _0437_ | _0433_;\n  assign _0439_ = addr[21] & state[9];\n  assign _0440_ = _0439_ | _0417_;\n  assign _0441_ = _0440_ | state[4];\n  assign _0442_ = _0441_ | _0438_;\n  assign _0468_[5] = _0442_ | _0371_;\n  assign _0443_ = din_ready | ~(addr[6]);\n  assign _0444_ = state[12] & ~(_0443_);\n  assign _0445_ = addr[14] & state[6];\n  assign _0446_ = _0445_ | _0444_;\n  assign _0447_ = _0446_ | _0422_;\n  assign _0448_ = addr[22] & state[9];\n  assign _0449_ = config_ddr | ~(config_qspi);\n  assign _0450_ = _0449_ & ~(_0392_);\n  assign _0451_ = state[2] & ~(_0450_);\n  assign _0452_ = _0451_ | _0448_;\n  assign _0453_ = _0452_ | _0447_;\n  assign _0468_[6] = _0453_ | _0371_;\n  assign _0454_ = din_ready | ~(addr[7]);\n  assign _0455_ = state[12] & ~(_0454_);\n  assign _0456_ = addr[15] & state[6];\n  assign _0457_ = _0456_ | _0455_;\n  assign _0458_ = _0457_ | _0433_;\n  assign _0459_ = addr[23] & state[9];\n  assign _0460_ = _0459_ | _0417_;\n  assign _0461_ = _0460_ | state[4];\n  assign _0462_ = _0461_ | _0458_;\n  assign _0468_[7] = _0462_ | _0371_;\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) softreset <= 1'h1;\n    else softreset <= _0051_;\n  always @(posedge clk)\n    state[0] <= _0000_;\n  always @(posedge clk)\n    state[1] <= _0004_;\n  always @(posedge clk)\n    state[2] <= _0005_;\n  always @(posedge clk)\n    state[3] <= _0006_;\n  always @(posedge clk)\n    state[4] <= _0007_;\n  always @(posedge clk)\n    state[5] <= _0008_;\n  always @(posedge clk)\n    state[6] <= _0009_;\n  always @(posedge clk)\n    state[7] <= _0010_;\n  always @(posedge clk)\n    state[8] <= _0011_;\n  always @(posedge clk)\n    state[9] <= _0012_;\n  always @(posedge clk)\n    state[10] <= _0001_;\n  always @(posedge clk)\n    state[11] <= _0002_;\n  always @(posedge clk)\n    state[12] <= _0003_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[2] <= _0042_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[3] <= _0043_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[4] <= _0044_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[5] <= _0045_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[6] <= _0046_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[7] <= _0047_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[8] <= _0048_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[9] <= _0049_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[10] <= _0027_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[11] <= _0028_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[12] <= _0029_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[13] <= _0030_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[14] <= _0031_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[15] <= _0032_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[16] <= _0033_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[17] <= _0034_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[18] <= _0035_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[19] <= _0036_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[20] <= _0038_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[21] <= _0039_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[22] <= _0040_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rd_addr[23] <= _0041_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0023_) rd_addr[0] <= _0026_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0023_) rd_addr[1] <= _0037_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[8] <= dout_data[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[9] <= dout_data[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[10] <= dout_data[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[11] <= dout_data[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[12] <= dout_data[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[13] <= dout_data[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[14] <= dout_data[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0018_) buffer[15] <= dout_data[7];\n  reg \\din_tag_reg[0] ;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) \\din_tag_reg[0]  <= 1'h0;\n    else if (_0021_) \\din_tag_reg[0]  <= _0467_[0];\n  assign din_tag[0] = \\din_tag_reg[0] ;\n  reg \\din_tag_reg[1] ;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) \\din_tag_reg[1]  <= 1'h0;\n    else if (_0021_) \\din_tag_reg[1]  <= _0467_[1];\n  assign din_tag[1] = \\din_tag_reg[1] ;\n  reg \\din_tag_reg[2] ;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) \\din_tag_reg[2]  <= 1'h0;\n    else if (_0021_) \\din_tag_reg[2]  <= _0467_[2];\n  assign din_tag[2] = \\din_tag_reg[2] ;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[16] <= dout_data[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[17] <= dout_data[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[18] <= dout_data[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[19] <= dout_data[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[20] <= dout_data[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[21] <= dout_data[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[22] <= dout_data[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0019_) buffer[23] <= dout_data[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[0] <= buffer[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[1] <= buffer[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[2] <= buffer[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[3] <= buffer[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[4] <= buffer[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[5] <= buffer[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[6] <= buffer[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[7] <= buffer[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[8] <= buffer[8];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[9] <= buffer[9];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[10] <= buffer[10];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[11] <= buffer[11];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[12] <= buffer[12];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[13] <= buffer[13];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[14] <= buffer[14];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[15] <= buffer[15];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[16] <= buffer[16];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[17] <= buffer[17];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[18] <= buffer[18];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[19] <= buffer[19];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[20] <= buffer[20];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[21] <= buffer[21];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[22] <= buffer[22];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[23] <= buffer[23];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[24] <= dout_data[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[25] <= dout_data[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[26] <= dout_data[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[27] <= dout_data[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[28] <= dout_data[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[29] <= dout_data[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[30] <= dout_data[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0016_) rdata[31] <= dout_data[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0025_) xfer_resetn <= 1'h0;\n    else xfer_resetn <= _0463_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) din_valid <= 1'h0;\n    else din_valid <= _0466_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[0] <= _0468_[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[1] <= _0468_[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[2] <= _0468_[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[3] <= _0468_[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[4] <= _0468_[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[5] <= _0468_[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[6] <= _0468_[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0022_) din_data[7] <= _0468_[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) din_qspi <= 1'h0;\n    else din_qspi <= _0465_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0025_) din_rd <= 1'h0;\n    else if (_0020_) din_rd <= 1'h1;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (!_0055_) din_ddr <= 1'h0;\n    else din_ddr <= _0464_;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[0] <= dout_data[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[1] <= dout_data[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[2] <= dout_data[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[3] <= dout_data[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[4] <= dout_data[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[5] <= dout_data[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[6] <= dout_data[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0017_) buffer[7] <= dout_data[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0025_) rd_valid <= 1'h0;\n    else if (_0050_) rd_valid <= 1'h1;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0015_)\n      if (valid) rd_wait <= 1'h0;\n      else rd_wait <= rd_inc;\n  (* src = \"../picorv32/picosoc/spimemio.v:207.2-375.5\" *)\n  always @(posedge clk)\n    if (_0014_)\n      if (_0024_) rd_inc <= 1'h0;\n      else rd_inc <= 1'h1;\n  (* src = \"../picorv32/picosoc/spimemio.v:151.2-156.5\" *)\n  always @(negedge clk)\n    xfer_io0_90 <= xfer_io0_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:151.2-156.5\" *)\n  always @(negedge clk)\n    xfer_io1_90 <= xfer_io1_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:151.2-156.5\" *)\n  always @(negedge clk)\n    xfer_io2_90 <= xfer_io2_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:151.2-156.5\" *)\n  always @(negedge clk)\n    xfer_io3_90 <= xfer_io3_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_en <= 1'h1;\n    else if (cfgreg_we[3]) config_en <= cfgreg_di[31];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_ddr <= 1'h0;\n    else if (cfgreg_we[2]) config_ddr <= cfgreg_di[22];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_qspi <= 1'h0;\n    else if (cfgreg_we[2]) config_qspi <= cfgreg_di[21];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_cont <= 1'h0;\n    else if (cfgreg_we[2]) config_cont <= cfgreg_di[20];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_dummy[0] <= 1'h0;\n    else if (cfgreg_we[2]) config_dummy[0] <= cfgreg_di[16];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_dummy[1] <= 1'h0;\n    else if (cfgreg_we[2]) config_dummy[1] <= cfgreg_di[17];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_dummy[2] <= 1'h0;\n    else if (cfgreg_we[2]) config_dummy[2] <= cfgreg_di[18];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_dummy[3] <= 1'h1;\n    else if (cfgreg_we[2]) config_dummy[3] <= cfgreg_di[19];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_oe[0] <= 1'h0;\n    else if (cfgreg_we[1]) config_oe[0] <= cfgreg_di[8];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_oe[1] <= 1'h0;\n    else if (cfgreg_we[1]) config_oe[1] <= cfgreg_di[9];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_oe[2] <= 1'h0;\n    else if (cfgreg_we[1]) config_oe[2] <= cfgreg_di[10];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_oe[3] <= 1'h0;\n    else if (cfgreg_we[1]) config_oe[3] <= cfgreg_di[11];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_csb <= 1'h0;\n    else if (cfgreg_we[0]) config_csb <= cfgreg_di[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_clk <= 1'h0;\n    else if (cfgreg_we[0]) config_clk <= cfgreg_di[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_do[0] <= 1'h0;\n    else if (cfgreg_we[0]) config_do[0] <= cfgreg_di[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_do[1] <= 1'h0;\n    else if (cfgreg_we[0]) config_do[1] <= cfgreg_di[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_do[2] <= 1'h0;\n    else if (cfgreg_we[0]) config_do[2] <= cfgreg_di[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:99.2-131.5\" *)\n  always @(posedge clk)\n    if (!resetn) config_do[3] <= 1'h0;\n    else if (cfgreg_we[0]) config_do[3] <= cfgreg_di[3];\n  (* module_not_derived = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:174.16-203.3\" *)\n  spimemio_xfer xfer (\n    .clk(clk),\n    .din_cont(1'h0),\n    .din_data(din_data),\n    .din_ddr(xfer_ddr),\n    .din_dspi(xfer_dspi),\n    .din_qspi(din_qspi),\n    .din_rd(din_rd),\n    .din_ready(din_ready),\n    .din_tag({ 1'h0, din_tag[2:0] }),\n    .din_valid(din_valid),\n    .dout_data(dout_data),\n    .dout_tag(dout_tag),\n    .dout_valid(dout_valid),\n    .flash_clk(xfer_clk),\n    .flash_csb(xfer_csb),\n    .flash_io0_di(flash_io0_di),\n    .flash_io0_do(xfer_io0_do),\n    .flash_io0_oe(xfer_io0_oe),\n    .flash_io1_di(flash_io1_di),\n    .flash_io1_do(xfer_io1_do),\n    .flash_io1_oe(xfer_io1_oe),\n    .flash_io2_di(flash_io2_di),\n    .flash_io2_do(xfer_io2_do),\n    .flash_io2_oe(xfer_io2_oe),\n    .flash_io3_di(flash_io3_di),\n    .flash_io3_do(xfer_io3_do),\n    .flash_io3_oe(xfer_io3_oe),\n    .resetn(xfer_resetn)\n  );\n  assign cfgreg_do = { config_en, 8'h00, config_ddr, config_qspi, config_cont, config_dummy, 4'h0, flash_io3_oe, flash_io2_oe, flash_io1_oe, flash_io0_oe, 2'h0, flash_csb, flash_clk, flash_io3_di, flash_io2_di, flash_io1_di, flash_io0_di };\n  assign din_cont = 1'h0;\n  assign din_tag[3] = 1'h0;\nendmodule\n\n(* src = \"../picorv32/picosoc/spimemio.v:378.1-579.10\" *)\nmodule spimemio_xfer(clk, resetn, din_valid, din_ready, din_data, din_tag, din_cont, din_dspi, din_qspi, din_ddr, din_rd, dout_valid, dout_data, dout_tag, flash_csb, flash_clk, flash_io0_oe, flash_io1_oe, flash_io2_oe, flash_io3_oe, flash_io0_do\n, flash_io1_do, flash_io2_do, flash_io3_do, flash_io0_di, flash_io1_di, flash_io2_di, flash_io3_di);\n  wire _000_;\n  wire _001_;\n  wire _002_;\n  wire _003_;\n  wire _004_;\n  wire _005_;\n  wire _006_;\n  wire _007_;\n  wire _008_;\n  (* src = \"../picorv32/picosoc/spimemio.v:553.18-553.42\" *)\n  wire _009_;\n  wire _010_;\n  wire _011_;\n  wire _012_;\n  wire _013_;\n  wire _014_;\n  wire _015_;\n  wire _016_;\n  wire _017_;\n  wire _018_;\n  wire _019_;\n  wire _020_;\n  wire _021_;\n  wire _022_;\n  wire _023_;\n  wire _024_;\n  wire _025_;\n  wire _026_;\n  wire _027_;\n  wire _028_;\n  wire _029_;\n  wire _030_;\n  wire _031_;\n  wire _032_;\n  wire _033_;\n  wire _034_;\n  wire _035_;\n  wire _036_;\n  wire _037_;\n  wire _038_;\n  wire _039_;\n  wire _040_;\n  wire _041_;\n  wire _042_;\n  wire _043_;\n  wire _044_;\n  wire _045_;\n  wire _046_;\n  wire _047_;\n  wire _048_;\n  wire _049_;\n  wire _050_;\n  wire _051_;\n  wire _052_;\n  wire _053_;\n  wire _054_;\n  wire _055_;\n  wire _056_;\n  wire _057_;\n  wire _058_;\n  wire _059_;\n  wire _060_;\n  wire _061_;\n  wire _062_;\n  wire _063_;\n  wire _064_;\n  wire _065_;\n  wire _066_;\n  wire _067_;\n  wire _068_;\n  wire _069_;\n  wire _070_;\n  wire _071_;\n  wire _072_;\n  wire _073_;\n  wire _074_;\n  wire _075_;\n  wire _076_;\n  wire _077_;\n  wire _078_;\n  wire _079_;\n  wire _080_;\n  wire _081_;\n  wire _082_;\n  wire _083_;\n  wire _084_;\n  wire _085_;\n  wire _086_;\n  wire _087_;\n  wire _088_;\n  wire _089_;\n  wire _090_;\n  wire _091_;\n  wire _092_;\n  wire _093_;\n  wire _094_;\n  wire _095_;\n  wire _096_;\n  wire _097_;\n  wire _098_;\n  wire _099_;\n  wire _100_;\n  wire _101_;\n  wire _102_;\n  wire _103_;\n  wire _104_;\n  wire _105_;\n  wire _106_;\n  wire _107_;\n  wire _108_;\n  wire _109_;\n  wire _110_;\n  wire _111_;\n  wire _112_;\n  wire _113_;\n  wire _114_;\n  wire _115_;\n  wire _116_;\n  wire _117_;\n  wire _118_;\n  wire _119_;\n  wire _120_;\n  wire _121_;\n  wire _122_;\n  wire _123_;\n  wire _124_;\n  wire _125_;\n  wire _126_;\n  wire _127_;\n  wire _128_;\n  wire _129_;\n  wire _130_;\n  wire _131_;\n  wire _132_;\n  wire _133_;\n  wire _134_;\n  wire _135_;\n  wire _136_;\n  wire _137_;\n  wire _138_;\n  wire _139_;\n  wire _140_;\n  wire _141_;\n  wire _142_;\n  wire _143_;\n  wire _144_;\n  wire _145_;\n  wire _146_;\n  wire _147_;\n  wire _148_;\n  wire _149_;\n  wire _150_;\n  wire _151_;\n  wire _152_;\n  wire _153_;\n  wire _154_;\n  wire _155_;\n  wire _156_;\n  wire _157_;\n  wire _158_;\n  wire _159_;\n  wire _160_;\n  wire _161_;\n  wire _162_;\n  wire _163_;\n  wire _164_;\n  wire _165_;\n  wire _166_;\n  wire _167_;\n  wire _168_;\n  wire _169_;\n  wire _170_;\n  wire _171_;\n  wire _172_;\n  wire _173_;\n  wire _174_;\n  wire _175_;\n  wire _176_;\n  wire _177_;\n  wire _178_;\n  wire _179_;\n  wire _180_;\n  wire _181_;\n  wire _182_;\n  wire _183_;\n  wire _184_;\n  wire _185_;\n  wire _186_;\n  wire _187_;\n  wire _188_;\n  wire _189_;\n  wire _190_;\n  wire _191_;\n  wire _192_;\n  wire _193_;\n  wire _194_;\n  wire _195_;\n  wire _196_;\n  wire _197_;\n  wire _198_;\n  wire _199_;\n  wire _200_;\n  wire _201_;\n  wire _202_;\n  wire _203_;\n  wire _204_;\n  wire _205_;\n  wire _206_;\n  wire _207_;\n  wire _208_;\n  wire _209_;\n  wire _210_;\n  wire _211_;\n  wire _212_;\n  wire _213_;\n  wire _214_;\n  wire _215_;\n  wire _216_;\n  wire _217_;\n  wire _218_;\n  wire _219_;\n  wire _220_;\n  wire _221_;\n  wire _222_;\n  wire _223_;\n  wire _224_;\n  wire _225_;\n  wire _226_;\n  wire _227_;\n  wire _228_;\n  (* force_downto = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:0.0-0.0|../picorv32/picosoc/spimemio.v:464.4-531.11|/var/home/arades/vrev/verai/.venv/lib64/python3.13/site-packages/pyosys/share/techmap.v:576.21-576.22\" *)\n  (* unused_bits = \"3\" *)\n  wire [3:0] _229_;\n  (* force_downto = 32'd1 *)\n  (* src = \"../picorv32/picosoc/spimemio.v:0.0-0.0|../picorv32/picosoc/spimemio.v:464.4-531.11|/var/home/arades/vrev/verai/.venv/lib64/python3.13/site-packages/pyosys/share/techmap.v:576.21-576.22\" *)\n  wire [7:0] _230_;\n  (* src = \"../picorv32/picosoc/spimemio.v:379.8-379.11\" *)\n  input clk;\n  wire clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:416.12-416.17\" *)\n  reg [3:0] count;\n  (* src = \"../picorv32/picosoc/spimemio.v:385.19-385.27\" *)\n  input din_cont;\n  wire din_cont;\n  (* src = \"../picorv32/picosoc/spimemio.v:383.19-383.27\" *)\n  input [7:0] din_data;\n  wire [7:0] din_data;\n  (* src = \"../picorv32/picosoc/spimemio.v:388.19-388.26\" *)\n  input din_ddr;\n  wire din_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:386.19-386.27\" *)\n  input din_dspi;\n  wire din_dspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:387.19-387.27\" *)\n  input din_qspi;\n  wire din_qspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:389.19-389.25\" *)\n  input din_rd;\n  wire din_rd;\n  (* src = \"../picorv32/picosoc/spimemio.v:382.19-382.28\" *)\n  output din_ready;\n  wire din_ready;\n  (* src = \"../picorv32/picosoc/spimemio.v:384.19-384.26\" *)\n  input [3:0] din_tag;\n  wire [3:0] din_tag;\n  (* src = \"../picorv32/picosoc/spimemio.v:381.19-381.28\" *)\n  input din_valid;\n  wire din_valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:392.19-392.28\" *)\n  output [7:0] dout_data;\n  wire [7:0] dout_data;\n  (* src = \"../picorv32/picosoc/spimemio.v:393.19-393.27\" *)\n  output [3:0] dout_tag;\n  wire [3:0] dout_tag;\n  (* src = \"../picorv32/picosoc/spimemio.v:391.19-391.29\" *)\n  output dout_valid;\n  wire dout_valid;\n  (* src = \"../picorv32/picosoc/spimemio.v:417.12-417.23\" *)\n  reg [3:0] dummy_count;\n  (* src = \"../picorv32/picosoc/spimemio.v:432.6-432.11\" *)\n  reg fetch;\n  (* src = \"../picorv32/picosoc/spimemio.v:396.13-396.22\" *)\n  output flash_clk;\n  reg flash_clk;\n  (* src = \"../picorv32/picosoc/spimemio.v:395.13-395.22\" *)\n  output flash_csb;\n  reg flash_csb;\n  (* src = \"../picorv32/picosoc/spimemio.v:408.13-408.25\" *)\n  input flash_io0_di;\n  wire flash_io0_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:403.13-403.25\" *)\n  output flash_io0_do;\n  wire flash_io0_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:398.13-398.25\" *)\n  output flash_io0_oe;\n  wire flash_io0_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:409.13-409.25\" *)\n  input flash_io1_di;\n  wire flash_io1_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:404.13-404.25\" *)\n  output flash_io1_do;\n  wire flash_io1_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:399.13-399.25\" *)\n  output flash_io1_oe;\n  wire flash_io1_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:410.13-410.25\" *)\n  input flash_io2_di;\n  wire flash_io2_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:405.13-405.25\" *)\n  output flash_io2_do;\n  wire flash_io2_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:400.13-400.25\" *)\n  output flash_io2_oe;\n  wire flash_io2_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:411.13-411.25\" *)\n  input flash_io3_di;\n  wire flash_io3_di;\n  (* src = \"../picorv32/picosoc/spimemio.v:406.13-406.25\" *)\n  output flash_io3_do;\n  wire flash_io3_do;\n  (* src = \"../picorv32/picosoc/spimemio.v:401.13-401.25\" *)\n  output flash_io3_oe;\n  wire flash_io3_oe;\n  (* src = \"../picorv32/picosoc/spimemio.v:414.12-414.19\" *)\n  reg [7:0] ibuffer;\n  (* src = \"../picorv32/picosoc/spimemio.v:434.6-434.16\" *)\n  reg last_fetch;\n  (* src = \"../picorv32/picosoc/spimemio.v:433.6-433.16\" *)\n  wire next_fetch;\n  (* src = \"../picorv32/picosoc/spimemio.v:428.12-428.24\" *)\n  (* unused_bits = \"1 2 3 4 5 6 7\" *)\n  wire [7:0] next_obuffer;\n  (* src = \"../picorv32/picosoc/spimemio.v:413.12-413.19\" *)\n  reg [7:0] obuffer;\n  (* src = \"../picorv32/picosoc/spimemio.v:379.13-379.19\" *)\n  input resetn;\n  wire resetn;\n  (* src = \"../picorv32/picosoc/spimemio.v:422.6-422.14\" *)\n  reg xfer_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:423.6-423.16\" *)\n  reg xfer_ddr_q;\n  (* src = \"../picorv32/picosoc/spimemio.v:420.6-420.15\" *)\n  reg xfer_dspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:421.6-421.15\" *)\n  reg xfer_qspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:424.6-424.13\" *)\n  reg xfer_rd;\n  (* src = \"../picorv32/picosoc/spimemio.v:425.12-425.20\" *)\n  reg [3:0] xfer_tag;\n  (* src = \"../picorv32/picosoc/spimemio.v:426.12-426.22\" *)\n  reg [3:0] xfer_tag_q;\n  assign _208_ = ~(dummy_count[0] | dummy_count[1]);\n  assign _209_ = dummy_count[3] | dummy_count[2];\n  assign _210_ = _208_ & ~(_209_);\n  assign _211_ = din_valid & resetn;\n  assign _212_ = ~xfer_dspi;\n  assign _213_ = ~flash_clk;\n  assign _214_ = ~count[1];\n  assign _215_ = count[0] | count[1];\n  assign _216_ = count[2] | count[3];\n  assign _010_ = ~(_216_ | _215_);\n  assign _011_ = _010_ ^ _214_;\n  assign _012_ = flash_clk ? _011_ : count[1];\n  assign _013_ = _012_ | count[0];\n  assign _014_ = ~count[2];\n  assign _015_ = _010_ | count[1];\n  assign _016_ = _015_ ^ _014_;\n  assign _017_ = flash_clk ? _016_ : count[2];\n  assign _018_ = _014_ & ~(_015_);\n  assign _019_ = _018_ ^ count[3];\n  assign _020_ = flash_clk ? _019_ : count[3];\n  assign _021_ = _020_ | _017_;\n  assign _022_ = _021_ | _013_;\n  assign _023_ = _022_ | _212_;\n  assign _024_ = xfer_dspi | xfer_qspi;\n  assign _025_ = ~(_024_ | xfer_ddr);\n  assign _026_ = xfer_ddr & xfer_qspi;\n  assign _027_ = xfer_qspi & ~(xfer_ddr);\n  assign _028_ = ~(_027_ | _026_);\n  assign _029_ = _028_ & ~(_025_);\n  assign _030_ = ~_026_;\n  assign _031_ = _010_ ^ _014_;\n  assign _032_ = _014_ & ~(_010_);\n  assign _033_ = _032_ ^ count[3];\n  assign _034_ = _033_ | _031_;\n  assign _035_ = _034_ | _215_;\n  assign _036_ = _035_ | _030_;\n  assign _037_ = flash_clk ? _031_ : count[2];\n  assign _038_ = flash_clk ? _033_ : count[3];\n  assign _039_ = _038_ | _037_;\n  assign _040_ = _039_ | _215_;\n  assign _041_ = _027_ & ~(_040_);\n  assign _042_ = _036_ & ~(_041_);\n  assign _043_ = ~_025_;\n  assign _044_ = ~count[0];\n  assign _045_ = _010_ ^ _044_;\n  assign _046_ = flash_clk ? _045_ : count[0];\n  assign _047_ = _010_ | count[0];\n  assign _048_ = _047_ ^ _214_;\n  assign _049_ = flash_clk ? _048_ : count[1];\n  assign _050_ = _049_ | _046_;\n  assign _051_ = _214_ & ~(_047_);\n  assign _052_ = _051_ ^ count[2];\n  assign _053_ = flash_clk ? _052_ : count[2];\n  assign _054_ = _051_ & ~(count[2]);\n  assign _055_ = _054_ ^ count[3];\n  assign _056_ = flash_clk ? _055_ : count[3];\n  assign _057_ = _056_ | _053_;\n  assign _058_ = _057_ | _050_;\n  assign _059_ = ~(_058_ | _043_);\n  assign _060_ = _042_ & ~(_059_);\n  assign _061_ = _029_ ? _023_ : _060_;\n  assign _062_ = _061_ | ~(_210_);\n  assign _063_ = _062_ | ~(_211_);\n  assign _008_ = din_valid & ~(_063_);\n  assign _000_ = _008_ | ~(_210_);\n  assign _064_ = ~(_210_ & resetn);\n  assign _065_ = _210_ & ~(_010_);\n  assign _066_ = _065_ & ~(_064_);\n  assign _067_ = _025_ & ~(_213_);\n  assign _068_ = _027_ & ~(_213_);\n  assign _069_ = _068_ | _067_;\n  assign _070_ = xfer_dspi & flash_clk;\n  assign _071_ = ~(_070_ & _028_);\n  assign _072_ = _043_ & ~(_071_);\n  assign _073_ = _212_ & ~(_026_);\n  assign _074_ = _027_ | _025_;\n  assign _075_ = _073_ & ~(_074_);\n  assign _076_ = _075_ | _072_;\n  assign _077_ = _076_ | _069_;\n  assign _004_ = _066_ & ~(_077_);\n  assign _001_ = ~(_010_ & _210_);\n  assign _078_ = _000_ | ~(_010_);\n  assign _079_ = ~(_008_ | _210_);\n  assign _080_ = _079_ & _065_;\n  assign _081_ = _078_ & ~(_080_);\n  assign _082_ = ~(_210_ & _212_);\n  assign _083_ = ~(_082_ | _000_);\n  assign _084_ = _026_ | _010_;\n  assign _085_ = _084_ | _074_;\n  assign _086_ = _083_ & ~(_085_);\n  assign _087_ = _086_ | _079_;\n  assign _003_ = _081_ & ~(_087_);\n  assign _088_ = ~resetn;\n  assign _089_ = ~(_210_ & _213_);\n  assign _090_ = ~(_089_ | _000_);\n  assign _091_ = _010_ | ~(_025_);\n  assign _092_ = _090_ & ~(_091_);\n  assign _093_ = _092_ | _088_;\n  assign _094_ = _010_ | ~(_027_);\n  assign _095_ = _090_ & ~(_094_);\n  assign _096_ = flash_clk | ~(xfer_dspi);\n  assign _097_ = _096_ | _000_;\n  assign _098_ = ~(_065_ & _028_);\n  assign _099_ = _098_ | _097_;\n  assign _100_ = _043_ & ~(_099_);\n  assign _101_ = _100_ | _095_;\n  assign _102_ = _101_ | _093_;\n  assign _005_ = _003_ & ~(_102_);\n  assign _103_ = ~_210_;\n  assign _104_ = _075_ | _103_;\n  assign _002_ = _065_ & ~(_104_);\n  assign _006_ = resetn & xfer_ddr;\n  assign _007_ = _008_ | _088_;\n  assign next_fetch = ~_062_;\n  assign din_ready = ~_063_;\n  assign _105_ = _062_ | fetch;\n  assign _106_ = last_fetch | ~(fetch);\n  assign _107_ = xfer_ddr_q ? _106_ : _105_;\n  assign dout_valid = resetn & ~(_107_);\n  assign _009_ = ~(flash_csb | flash_clk);\n  assign _108_ = dummy_count[0] ^ flash_clk;\n  assign _109_ = din_rd & din_data[0];\n  assign _217_ = _008_ ? _109_ : _108_;\n  assign _110_ = flash_clk & ~(dummy_count[0]);\n  assign _111_ = _110_ ^ dummy_count[1];\n  assign _112_ = din_data[1] & din_rd;\n  assign _218_ = _008_ ? _112_ : _111_;\n  assign _113_ = _110_ & ~(dummy_count[1]);\n  assign _114_ = _113_ ^ dummy_count[2];\n  assign _115_ = din_data[2] & din_rd;\n  assign _219_ = _008_ ? _115_ : _114_;\n  assign _116_ = _113_ & ~(dummy_count[2]);\n  assign _117_ = _116_ ^ dummy_count[3];\n  assign _118_ = din_data[3] & din_rd;\n  assign _220_ = _008_ ? _118_ : _117_;\n  assign _119_ = ~(_033_ & _026_);\n  assign _120_ = ~_027_;\n  assign _121_ = _038_ & ~(_120_);\n  assign _122_ = _119_ & ~(_121_);\n  assign _123_ = _056_ & ~(_043_);\n  assign _124_ = _123_ | ~(_122_);\n  assign _125_ = _029_ ? _020_ : _124_;\n  assign _126_ = ~(_125_ & _210_);\n  assign _127_ = _126_ | _010_;\n  assign _128_ = _210_ & ~(_127_);\n  assign _221_ = _128_ | _008_;\n  assign _129_ = _025_ & obuffer[0];\n  assign _222_ = _008_ ? din_data[1] : _129_;\n  assign _130_ = _025_ & obuffer[1];\n  assign _131_ = _029_ ? obuffer[0] : _130_;\n  assign _223_ = _008_ ? din_data[2] : _131_;\n  assign _132_ = _025_ & obuffer[2];\n  assign _133_ = _029_ ? obuffer[1] : _132_;\n  assign _224_ = _008_ ? din_data[3] : _133_;\n  assign _134_ = obuffer[0] & ~(_028_);\n  assign _135_ = _025_ & obuffer[3];\n  assign _136_ = _135_ | _134_;\n  assign _137_ = _029_ ? obuffer[2] : _136_;\n  assign _225_ = _008_ ? din_data[4] : _137_;\n  assign _138_ = obuffer[1] & ~(_028_);\n  assign _139_ = ~obuffer[4];\n  assign _140_ = _025_ & ~(_139_);\n  assign _141_ = _140_ | _138_;\n  assign _142_ = _029_ ? obuffer[3] : _141_;\n  assign _226_ = _008_ ? din_data[5] : _142_;\n  assign _143_ = obuffer[2] & ~(_028_);\n  assign _144_ = ~obuffer[5];\n  assign _145_ = _025_ & ~(_144_);\n  assign _146_ = _145_ | _143_;\n  assign _147_ = _029_ ? obuffer[4] : _146_;\n  assign _227_ = _008_ ? din_data[6] : _147_;\n  assign _148_ = obuffer[3] & ~(_028_);\n  assign _149_ = ~obuffer[6];\n  assign _150_ = _025_ & ~(_149_);\n  assign _151_ = _150_ | _148_;\n  assign _152_ = _029_ ? obuffer[5] : _151_;\n  assign _228_ = _008_ ? din_data[7] : _152_;\n  assign _153_ = flash_io0_di & ~(_028_);\n  assign _154_ = _025_ & flash_io1_di;\n  assign _155_ = _154_ | _153_;\n  assign _230_[0] = _029_ ? flash_io0_di : _155_;\n  assign _156_ = flash_io1_di & ~(_028_);\n  assign _157_ = _025_ & ibuffer[0];\n  assign _158_ = _157_ | _156_;\n  assign _230_[1] = _029_ ? flash_io1_di : _158_;\n  assign _159_ = flash_io2_di & ~(_028_);\n  assign _160_ = _025_ & ibuffer[1];\n  assign _161_ = _160_ | _159_;\n  assign _230_[2] = _029_ ? ibuffer[0] : _161_;\n  assign _162_ = flash_io3_di & ~(_028_);\n  assign _163_ = _025_ & ibuffer[2];\n  assign _164_ = _163_ | _162_;\n  assign _230_[3] = _029_ ? ibuffer[1] : _164_;\n  assign _165_ = ibuffer[0] & ~(_028_);\n  assign _166_ = _025_ & ibuffer[3];\n  assign _167_ = _166_ | _165_;\n  assign _230_[4] = _029_ ? ibuffer[2] : _167_;\n  assign _168_ = ibuffer[1] & ~(_028_);\n  assign _169_ = _025_ & ibuffer[4];\n  assign _170_ = _169_ | _168_;\n  assign _230_[5] = _029_ ? ibuffer[3] : _170_;\n  assign _171_ = ibuffer[2] & ~(_028_);\n  assign _172_ = _025_ & ibuffer[5];\n  assign _173_ = _172_ | _171_;\n  assign _230_[6] = _029_ ? ibuffer[4] : _173_;\n  assign _174_ = ibuffer[3] & ~(_028_);\n  assign _175_ = _025_ & ibuffer[6];\n  assign _176_ = _175_ | _174_;\n  assign _230_[7] = _029_ ? ibuffer[5] : _176_;\n  assign _177_ = _026_ & ~(_044_);\n  assign _178_ = _027_ & ~(_044_);\n  assign _179_ = _178_ | _177_;\n  assign _180_ = _046_ & ~(_043_);\n  assign _181_ = _180_ | _179_;\n  assign _229_[0] = _029_ ? count[0] : _181_;\n  assign _182_ = _026_ & ~(_214_);\n  assign _183_ = _027_ & ~(_214_);\n  assign _184_ = _183_ | _182_;\n  assign _185_ = _049_ & ~(_043_);\n  assign _186_ = _185_ | _184_;\n  assign _229_[1] = _029_ ? _012_ : _186_;\n  assign _187_ = _031_ & ~(_030_);\n  assign _188_ = _037_ & ~(_120_);\n  assign _189_ = _188_ | _187_;\n  assign _190_ = _053_ & ~(_043_);\n  assign _191_ = _190_ | _189_;\n  assign _229_[2] = _029_ ? _017_ : _191_;\n  assign _192_ = _028_ | ~(obuffer[7]);\n  assign flash_io3_do = _210_ & ~(_192_);\n  assign _193_ = _028_ | _149_;\n  assign flash_io2_do = _210_ & ~(_193_);\n  assign _194_ = ~(obuffer[7] & xfer_dspi);\n  assign _195_ = _028_ | _144_;\n  assign _196_ = _029_ ? _194_ : _195_;\n  assign flash_io1_do = _210_ & ~(_196_);\n  assign _197_ = ~(obuffer[6] & xfer_dspi);\n  assign _198_ = _028_ | _139_;\n  assign _199_ = _025_ & obuffer[7];\n  assign _200_ = _198_ & ~(_199_);\n  assign _201_ = _029_ ? _197_ : _200_;\n  assign flash_io0_do = _210_ & ~(_201_);\n  assign _202_ = ~(_028_ | xfer_rd);\n  assign flash_io2_oe = _202_ & ~(_103_);\n  assign _203_ = ~_202_;\n  assign _204_ = xfer_rd | ~(xfer_dspi);\n  assign _205_ = _029_ ? _204_ : _203_;\n  assign flash_io1_oe = _210_ & ~(_205_);\n  assign _206_ = _043_ & ~(_202_);\n  assign _207_ = _029_ ? _204_ : _206_;\n  assign flash_io0_oe = _210_ & ~(_207_);\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[1] <= _222_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[2] <= _223_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[3] <= _224_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[4] <= _225_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[5] <= _226_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[6] <= _227_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_) obuffer[7] <= _228_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) count[3] <= 1'h0;\n    else if (_003_) count[3] <= _221_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) flash_csb <= 1'h1;\n    else if (_008_) flash_csb <= 1'h0;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_007_) flash_clk <= 1'h0;\n    else if (_001_) flash_clk <= _009_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_dspi <= 1'h0;\n    else if (_008_) xfer_dspi <= din_dspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_ddr <= 1'h0;\n    else if (_008_) xfer_ddr <= din_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_007_) count[0] <= 1'h0;\n    else if (_002_) count[0] <= _229_[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_007_) count[1] <= 1'h0;\n    else if (_002_) count[1] <= _229_[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_007_) count[2] <= 1'h0;\n    else if (_002_) count[2] <= _229_[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) dummy_count[0] <= 1'h0;\n    else if (_000_) dummy_count[0] <= _217_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) dummy_count[1] <= 1'h0;\n    else if (_000_) dummy_count[1] <= _218_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) dummy_count[2] <= 1'h0;\n    else if (_000_) dummy_count[2] <= _219_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) dummy_count[3] <= 1'h0;\n    else if (_000_) dummy_count[3] <= _220_;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_qspi <= 1'h0;\n    else if (_008_) xfer_qspi <= din_qspi;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_rd <= 1'h0;\n    else if (_008_) xfer_rd <= din_rd;\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_tag[0] <= 1'h0;\n    else if (_008_) xfer_tag[0] <= din_tag[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_tag[1] <= 1'h0;\n    else if (_008_) xfer_tag[1] <= din_tag[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_tag[2] <= 1'h0;\n    else if (_008_) xfer_tag[2] <= din_tag[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) xfer_tag[3] <= 1'h0;\n    else if (_008_) xfer_tag[3] <= din_tag[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[0] <= _230_[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[1] <= _230_[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[2] <= _230_[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[3] <= _230_[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[4] <= _230_[4];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[5] <= _230_[5];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[6] <= _230_[6];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_004_) ibuffer[7] <= _230_[7];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!resetn) fetch <= 1'h1;\n    else fetch <= next_fetch;\n  (* src = \"../picorv32/picosoc/spimemio.v:436.2-439.5\" *)\n  always @(posedge clk)\n    xfer_ddr_q <= xfer_ddr;\n  (* src = \"../picorv32/picosoc/spimemio.v:436.2-439.5\" *)\n  always @(posedge clk)\n    xfer_tag_q[0] <= xfer_tag[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:436.2-439.5\" *)\n  always @(posedge clk)\n    xfer_tag_q[1] <= xfer_tag[1];\n  (* src = \"../picorv32/picosoc/spimemio.v:436.2-439.5\" *)\n  always @(posedge clk)\n    xfer_tag_q[2] <= xfer_tag[2];\n  (* src = \"../picorv32/picosoc/spimemio.v:436.2-439.5\" *)\n  always @(posedge clk)\n    xfer_tag_q[3] <= xfer_tag[3];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (_005_)\n      if (!_008_) obuffer[0] <= 1'h0;\n      else obuffer[0] <= din_data[0];\n  (* src = \"../picorv32/picosoc/spimemio.v:535.2-578.5\" *)\n  always @(posedge clk)\n    if (!_006_) last_fetch <= 1'h1;\n    else last_fetch <= fetch;\n  assign dout_data = ibuffer;\n  assign dout_tag = xfer_tag_q;\n  assign flash_io3_oe = flash_io2_oe;\n  assign next_obuffer[0] = 1'h0;\nendmodule\n", "answer": "/*\n *  PicoSoC - A simple example SoC using PicoRV32\n *\n *  Copyright (C) 2017  Claire Xenia Wolf <claire@yosyshq.com>\n *\n *  Permission to use, copy, modify, and/or distribute this software for any\n *  purpose with or without fee is hereby granted, provided that the above\n *  copyright notice and this permission notice appear in all copies.\n *\n *  THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n *  WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n *  MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n *  ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n *  WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n *  ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n *  OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n */\n\nmodule spimemio (\n\tinput clk, resetn,\n\n\tinput valid,\n\toutput ready,\n\tinput [23:0] addr,\n\toutput reg [31:0] rdata,\n\n\toutput flash_csb,\n\toutput flash_clk,\n\n\toutput flash_io0_oe,\n\toutput flash_io1_oe,\n\toutput flash_io2_oe,\n\toutput flash_io3_oe,\n\n\toutput flash_io0_do,\n\toutput flash_io1_do,\n\toutput flash_io2_do,\n\toutput flash_io3_do,\n\n\tinput  flash_io0_di,\n\tinput  flash_io1_di,\n\tinput  flash_io2_di,\n\tinput  flash_io3_di,\n\n\tinput   [3:0] cfgreg_we,\n\tinput  [31:0] cfgreg_di,\n\toutput [31:0] cfgreg_do\n);\n\treg        xfer_resetn;\n\treg        din_valid;\n\twire       din_ready;\n\treg  [7:0] din_data;\n\treg  [3:0] din_tag;\n\treg        din_cont;\n\treg        din_qspi;\n\treg        din_ddr;\n\treg        din_rd;\n\n\twire       dout_valid;\n\twire [7:0] dout_data;\n\twire [3:0] dout_tag;\n\n\treg [23:0] buffer;\n\n\treg [23:0] rd_addr;\n\treg rd_valid;\n\treg rd_wait;\n\treg rd_inc;\n\n\tassign ready = valid && (addr == rd_addr) && rd_valid;\n\twire jump = valid && !ready && (addr != rd_addr+4) && rd_valid;\n\n\treg softreset;\n\n\treg       config_en;      // cfgreg[31]\n\treg       config_ddr;     // cfgreg[22]\n\treg       config_qspi;    // cfgreg[21]\n\treg       config_cont;    // cfgreg[20]\n\treg [3:0] config_dummy;   // cfgreg[19:16]\n\treg [3:0] config_oe;      // cfgreg[11:8]\n\treg       config_csb;     // cfgreg[5]\n\treg       config_clk;     // cfgref[4]\n\treg [3:0] config_do;      // cfgreg[3:0]\n\n\tassign cfgreg_do[31] = config_en;\n\tassign cfgreg_do[30:23] = 0;\n\tassign cfgreg_do[22] = config_ddr;\n\tassign cfgreg_do[21] = config_qspi;\n\tassign cfgreg_do[20] = config_cont;\n\tassign cfgreg_do[19:16] = config_dummy;\n\tassign cfgreg_do[15:12] = 0;\n\tassign cfgreg_do[11:8] = {flash_io3_oe, flash_io2_oe, flash_io1_oe, flash_io0_oe};\n\tassign cfgreg_do[7:6] = 0;\n\tassign cfgreg_do[5] = flash_csb;\n\tassign cfgreg_do[4] = flash_clk;\n\tassign cfgreg_do[3:0] = {flash_io3_di, flash_io2_di, flash_io1_di, flash_io0_di};\n\n\talways @(posedge clk) begin\n\t\tsoftreset <= !config_en || cfgreg_we;\n\t\tif (!resetn) begin\n\t\t\tsoftreset <= 1;\n\t\t\tconfig_en <= 1;\n\t\t\tconfig_csb <= 0;\n\t\t\tconfig_clk <= 0;\n\t\t\tconfig_oe <= 0;\n\t\t\tconfig_do <= 0;\n\t\t\tconfig_ddr <= 0;\n\t\t\tconfig_qspi <= 0;\n\t\t\tconfig_cont <= 0;\n\t\t\tconfig_dummy <= 8;\n\t\tend else begin\n\t\t\tif (cfgreg_we[0]) begin\n\t\t\t\tconfig_csb <= cfgreg_di[5];\n\t\t\t\tconfig_clk <= cfgreg_di[4];\n\t\t\t\tconfig_do <= cfgreg_di[3:0];\n\t\t\tend\n\t\t\tif (cfgreg_we[1]) begin\n\t\t\t\tconfig_oe <= cfgreg_di[11:8];\n\t\t\tend\n\t\t\tif (cfgreg_we[2]) begin\n\t\t\t\tconfig_ddr <= cfgreg_di[22];\n\t\t\t\tconfig_qspi <= cfgreg_di[21];\n\t\t\t\tconfig_cont <= cfgreg_di[20];\n\t\t\t\tconfig_dummy <= cfgreg_di[19:16];\n\t\t\tend\n\t\t\tif (cfgreg_we[3]) begin\n\t\t\t\tconfig_en <= cfgreg_di[31];\n\t\t\tend\n\t\tend\n\tend\n\n\twire xfer_csb;\n\twire xfer_clk;\n\n\twire xfer_io0_oe;\n\twire xfer_io1_oe;\n\twire xfer_io2_oe;\n\twire xfer_io3_oe;\n\n\twire xfer_io0_do;\n\twire xfer_io1_do;\n\twire xfer_io2_do;\n\twire xfer_io3_do;\n\n\treg xfer_io0_90;\n\treg xfer_io1_90;\n\treg xfer_io2_90;\n\treg xfer_io3_90;\n\n\talways @(negedge clk) begin\n\t\txfer_io0_90 <= xfer_io0_do;\n\t\txfer_io1_90 <= xfer_io1_do;\n\t\txfer_io2_90 <= xfer_io2_do;\n\t\txfer_io3_90 <= xfer_io3_do;\n\tend\n\n\tassign flash_csb = config_en ? xfer_csb : config_csb;\n\tassign flash_clk = config_en ? xfer_clk : config_clk;\n\n\tassign flash_io0_oe = config_en ? xfer_io0_oe : config_oe[0];\n\tassign flash_io1_oe = config_en ? xfer_io1_oe : config_oe[1];\n\tassign flash_io2_oe = config_en ? xfer_io2_oe : config_oe[2];\n\tassign flash_io3_oe = config_en ? xfer_io3_oe : config_oe[3];\n\n\tassign flash_io0_do = config_en ? (config_ddr ? xfer_io0_90 : xfer_io0_do) : config_do[0];\n\tassign flash_io1_do = config_en ? (config_ddr ? xfer_io1_90 : xfer_io1_do) : config_do[1];\n\tassign flash_io2_do = config_en ? (config_ddr ? xfer_io2_90 : xfer_io2_do) : config_do[2];\n\tassign flash_io3_do = config_en ? (config_ddr ? xfer_io3_90 : xfer_io3_do) : config_do[3];\n\n\twire xfer_dspi = din_ddr && !din_qspi;\n\twire xfer_ddr = din_ddr && din_qspi;\n\n\tspimemio_xfer xfer (\n\t\t.clk          (clk         ),\n\t\t.resetn       (xfer_resetn ),\n\t\t.din_valid    (din_valid   ),\n\t\t.din_ready    (din_ready   ),\n\t\t.din_data     (din_data    ),\n\t\t.din_tag      (din_tag     ),\n\t\t.din_cont     (din_cont    ),\n\t\t.din_dspi     (xfer_dspi   ),\n\t\t.din_qspi     (din_qspi    ),\n\t\t.din_ddr      (xfer_ddr    ),\n\t\t.din_rd       (din_rd      ),\n\t\t.dout_valid   (dout_valid  ),\n\t\t.dout_data    (dout_data   ),\n\t\t.dout_tag     (dout_tag    ),\n\t\t.flash_csb    (xfer_csb    ),\n\t\t.flash_clk    (xfer_clk    ),\n\t\t.flash_io0_oe (xfer_io0_oe ),\n\t\t.flash_io1_oe (xfer_io1_oe ),\n\t\t.flash_io2_oe (xfer_io2_oe ),\n\t\t.flash_io3_oe (xfer_io3_oe ),\n\t\t.flash_io0_do (xfer_io0_do ),\n\t\t.flash_io1_do (xfer_io1_do ),\n\t\t.flash_io2_do (xfer_io2_do ),\n\t\t.flash_io3_do (xfer_io3_do ),\n\t\t.flash_io0_di (flash_io0_di),\n\t\t.flash_io1_di (flash_io1_di),\n\t\t.flash_io2_di (flash_io2_di),\n\t\t.flash_io3_di (flash_io3_di)\n\t);\n\n\treg [3:0] state;\n\n\talways @(posedge clk) begin\n\t\txfer_resetn <= 1;\n\t\tdin_valid <= 0;\n\n\t\tif (!resetn || softreset) begin\n\t\t\tstate <= 0;\n\t\t\txfer_resetn <= 0;\n\t\t\trd_valid <= 0;\n\t\t\tdin_tag <= 0;\n\t\t\tdin_cont <= 0;\n\t\t\tdin_qspi <= 0;\n\t\t\tdin_ddr <= 0;\n\t\t\tdin_rd <= 0;\n\t\tend else begin\n\t\t\tif (dout_valid && dout_tag == 1) buffer[ 7: 0] <= dout_data;\n\t\t\tif (dout_valid && dout_tag == 2) buffer[15: 8] <= dout_data;\n\t\t\tif (dout_valid && dout_tag == 3) buffer[23:16] <= dout_data;\n\t\t\tif (dout_valid && dout_tag == 4) begin\n\t\t\t\trdata <= {dout_data, buffer};\n\t\t\t\trd_addr <= rd_inc ? rd_addr + 4 : addr;\n\t\t\t\trd_valid <= 1;\n\t\t\t\trd_wait <= rd_inc;\n\t\t\t\trd_inc <= 1;\n\t\t\tend\n\n\t\t\tif (valid)\n\t\t\t\trd_wait <= 0;\n\n\t\t\tcase (state)\n\t\t\t\t0: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_data <= 8'h ff;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 1;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t1: begin\n\t\t\t\t\tif (dout_valid) begin\n\t\t\t\t\t\txfer_resetn <= 0;\n\t\t\t\t\t\tstate <= 2;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t2: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_data <= 8'h ab;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 3;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t3: begin\n\t\t\t\t\tif (dout_valid) begin\n\t\t\t\t\t\txfer_resetn <= 0;\n\t\t\t\t\t\tstate <= 4;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t4: begin\n\t\t\t\t\trd_inc <= 0;\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tcase ({config_ddr, config_qspi})\n\t\t\t\t\t\t2'b11: din_data <= 8'h ED;\n\t\t\t\t\t\t2'b01: din_data <= 8'h EB;\n\t\t\t\t\t\t2'b10: din_data <= 8'h BB;\n\t\t\t\t\t\t2'b00: din_data <= 8'h 03;\n\t\t\t\t\tendcase\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 5;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t5: begin\n\t\t\t\t\tif (valid && !ready) begin\n\t\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\t\tdin_data <= addr[23:16];\n\t\t\t\t\t\tdin_qspi <= config_qspi;\n\t\t\t\t\t\tdin_ddr <= config_ddr;\n\t\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\t\tstate <= 6;\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t6: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tdin_data <= addr[15:8];\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 7;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t7: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tdin_data <= addr[7:0];\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tdin_data <= 0;\n\t\t\t\t\t\tstate <= config_qspi || config_ddr ? 8 : 9;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t8: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 0;\n\t\t\t\t\tdin_data <= config_cont ? 8'h A5 : 8'h FF;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_rd <= 1;\n\t\t\t\t\t\tdin_data <= config_dummy;\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 9;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t9: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 1;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 10;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t10: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_data <= 8'h 00;\n\t\t\t\t\tdin_tag <= 2;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 11;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t11: begin\n\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\tdin_tag <= 3;\n\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\tstate <= 12;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t12: begin\n\t\t\t\t\tif (!rd_wait || valid) begin\n\t\t\t\t\t\tdin_valid <= 1;\n\t\t\t\t\t\tdin_tag <= 4;\n\t\t\t\t\t\tif (din_ready) begin\n\t\t\t\t\t\t\tdin_valid <= 0;\n\t\t\t\t\t\t\tstate <= 9;\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tendcase\n\n\t\t\tif (jump) begin\n\t\t\t\trd_inc <= 0;\n\t\t\t\trd_valid <= 0;\n\t\t\t\txfer_resetn <= 0;\n\t\t\t\tif (config_cont) begin\n\t\t\t\t\tstate <= 5;\n\t\t\t\tend else begin\n\t\t\t\t\tstate <= 4;\n\t\t\t\t\tdin_qspi <= 0;\n\t\t\t\t\tdin_ddr <= 0;\n\t\t\t\tend\n\t\t\t\tdin_rd <= 0;\n\t\t\tend\n\t\tend\n\tend\nendmodule\n\nmodule spimemio_xfer (\n\tinput clk, resetn,\n\n\tinput            din_valid,\n\toutput           din_ready,\n\tinput      [7:0] din_data,\n\tinput      [3:0] din_tag,\n\tinput            din_cont,\n\tinput            din_dspi,\n\tinput            din_qspi,\n\tinput            din_ddr,\n\tinput            din_rd,\n\n\toutput           dout_valid,\n\toutput     [7:0] dout_data,\n\toutput     [3:0] dout_tag,\n\n\toutput reg flash_csb,\n\toutput reg flash_clk,\n\n\toutput reg flash_io0_oe,\n\toutput reg flash_io1_oe,\n\toutput reg flash_io2_oe,\n\toutput reg flash_io3_oe,\n\n\toutput reg flash_io0_do,\n\toutput reg flash_io1_do,\n\toutput reg flash_io2_do,\n\toutput reg flash_io3_do,\n\n\tinput      flash_io0_di,\n\tinput      flash_io1_di,\n\tinput      flash_io2_di,\n\tinput      flash_io3_di\n);\n\treg [7:0] obuffer;\n\treg [7:0] ibuffer;\n\n\treg [3:0] count;\n\treg [3:0] dummy_count;\n\n\treg xfer_cont;\n\treg xfer_dspi;\n\treg xfer_qspi;\n\treg xfer_ddr;\n\treg xfer_ddr_q;\n\treg xfer_rd;\n\treg [3:0] xfer_tag;\n\treg [3:0] xfer_tag_q;\n\n\treg [7:0] next_obuffer;\n\treg [7:0] next_ibuffer;\n\treg [3:0] next_count;\n\n\treg fetch;\n\treg next_fetch;\n\treg last_fetch;\n\n\talways @(posedge clk) begin\n\t\txfer_ddr_q <= xfer_ddr;\n\t\txfer_tag_q <= xfer_tag;\n\tend\n\n\tassign din_ready = din_valid && resetn && next_fetch;\n\n\tassign dout_valid = (xfer_ddr_q ? fetch && !last_fetch : next_fetch && !fetch) && resetn;\n\tassign dout_data = ibuffer;\n\tassign dout_tag = xfer_tag_q;\n\n\talways @* begin\n\t\tflash_io0_oe = 0;\n\t\tflash_io1_oe = 0;\n\t\tflash_io2_oe = 0;\n\t\tflash_io3_oe = 0;\n\n\t\tflash_io0_do = 0;\n\t\tflash_io1_do = 0;\n\t\tflash_io2_do = 0;\n\t\tflash_io3_do = 0;\n\n\t\tnext_obuffer = obuffer;\n\t\tnext_ibuffer = ibuffer;\n\t\tnext_count = count;\n\t\tnext_fetch = 0;\n\n\t\tif (dummy_count == 0) begin\n\t\t\tcasez ({xfer_ddr, xfer_qspi, xfer_dspi})\n\t\t\t\t3'b 000: begin\n\t\t\t\t\tflash_io0_oe = 1;\n\t\t\t\t\tflash_io0_do = obuffer[7];\n\n\t\t\t\t\tif (flash_clk) begin\n\t\t\t\t\t\tnext_obuffer = {obuffer[6:0], 1'b 0};\n\t\t\t\t\t\tnext_count = count - |count;\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tnext_ibuffer = {ibuffer[6:0], flash_io1_di};\n\t\t\t\t\tend\n\n\t\t\t\t\tnext_fetch = (next_count == 0);\n\t\t\t\tend\n\t\t\t\t3'b 01?: begin\n\t\t\t\t\tflash_io0_oe = !xfer_rd;\n\t\t\t\t\tflash_io1_oe = !xfer_rd;\n\t\t\t\t\tflash_io2_oe = !xfer_rd;\n\t\t\t\t\tflash_io3_oe = !xfer_rd;\n\n\t\t\t\t\tflash_io0_do = obuffer[4];\n\t\t\t\t\tflash_io1_do = obuffer[5];\n\t\t\t\t\tflash_io2_do = obuffer[6];\n\t\t\t\t\tflash_io3_do = obuffer[7];\n\n\t\t\t\t\tif (flash_clk) begin\n\t\t\t\t\t\tnext_obuffer = {obuffer[3:0], 4'b 0000};\n\t\t\t\t\t\tnext_count = count - {|count, 2'b00};\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tnext_ibuffer = {ibuffer[3:0], flash_io3_di, flash_io2_di, flash_io1_di, flash_io0_di};\n\t\t\t\t\tend\n\n\t\t\t\t\tnext_fetch = (next_count == 0);\n\t\t\t\tend\n\t\t\t\t3'b 11?: begin\n\t\t\t\t\tflash_io0_oe = !xfer_rd;\n\t\t\t\t\tflash_io1_oe = !xfer_rd;\n\t\t\t\t\tflash_io2_oe = !xfer_rd;\n\t\t\t\t\tflash_io3_oe = !xfer_rd;\n\n\t\t\t\t\tflash_io0_do = obuffer[4];\n\t\t\t\t\tflash_io1_do = obuffer[5];\n\t\t\t\t\tflash_io2_do = obuffer[6];\n\t\t\t\t\tflash_io3_do = obuffer[7];\n\n\t\t\t\t\tnext_obuffer = {obuffer[3:0], 4'b 0000};\n\t\t\t\t\tnext_ibuffer = {ibuffer[3:0], flash_io3_di, flash_io2_di, flash_io1_di, flash_io0_di};\n\t\t\t\t\tnext_count = count - {|count, 2'b00};\n\n\t\t\t\t\tnext_fetch = (next_count == 0);\n\t\t\t\tend\n\t\t\t\t3'b ??1: begin\n\t\t\t\t\tflash_io0_oe = !xfer_rd;\n\t\t\t\t\tflash_io1_oe = !xfer_rd;\n\n\t\t\t\t\tflash_io0_do = obuffer[6];\n\t\t\t\t\tflash_io1_do = obuffer[7];\n\n\t\t\t\t\tif (flash_clk) begin\n\t\t\t\t\t\tnext_obuffer = {obuffer[5:0], 2'b 00};\n\t\t\t\t\t\tnext_count = count - {|count, 1'b0};\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tnext_ibuffer = {ibuffer[5:0], flash_io1_di, flash_io0_di};\n\t\t\t\t\tend\n\n\t\t\t\t\tnext_fetch = (next_count == 0);\n\t\t\t\tend\n\t\t\tendcase\n\t\tend\n\tend\n\n\talways @(posedge clk) begin\n\t\tif (!resetn) begin\n\t\t\tfetch <= 1;\n\t\t\tlast_fetch <= 1;\n\t\t\tflash_csb <= 1;\n\t\t\tflash_clk <= 0;\n\t\t\tcount <= 0;\n\t\t\tdummy_count <= 0;\n\t\t\txfer_tag <= 0;\n\t\t\txfer_cont <= 0;\n\t\t\txfer_dspi <= 0;\n\t\t\txfer_qspi <= 0;\n\t\t\txfer_ddr <= 0;\n\t\t\txfer_rd <= 0;\n\t\tend else begin\n\t\t\tfetch <= next_fetch;\n\t\t\tlast_fetch <= xfer_ddr ? fetch : 1;\n\t\t\tif (dummy_count) begin\n\t\t\t\tflash_clk <= !flash_clk && !flash_csb;\n\t\t\t\tdummy_count <= dummy_count - flash_clk;\n\t\t\tend else\n\t\t\tif (count) begin\n\t\t\t\tflash_clk <= !flash_clk && !flash_csb;\n\t\t\t\tobuffer <= next_obuffer;\n\t\t\t\tibuffer <= next_ibuffer;\n\t\t\t\tcount <= next_count;\n\t\t\tend\n\t\t\tif (din_valid && din_ready) begin\n\t\t\t\tflash_csb <= 0;\n\t\t\t\tflash_clk <= 0;\n\n\t\t\t\tcount <= 8;\n\t\t\t\tdummy_count <= din_rd ? din_data : 0;\n\t\t\t\tobuffer <= din_data;\n\n\t\t\t\txfer_tag <= din_tag;\n\t\t\t\txfer_cont <= din_cont;\n\t\t\t\txfer_dspi <= din_dspi;\n\t\t\t\txfer_qspi <= din_qspi;\n\t\t\t\txfer_ddr <= din_ddr;\n\t\t\t\txfer_rd <= din_rd;\n\t\t\tend\n\t\tend\n\tend\nendmodule\n"}